<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>ã²ã¤ã¾ã¶ã—é£Ÿã¹ãŸã„</title><link href="https://www.hitsumabushi.org/" rel="alternate"></link><link href="https://www.hitsumabushi.org/feeds/all.atom.xml" rel="self"></link><id>https://www.hitsumabushi.org/</id><updated>2024-12-14T02:00:00+09:00</updated><subtitle>ãƒ¡ãƒ¢ä»£ã‚ã‚Šã®ãƒ–ãƒ­ã‚°</subtitle><entry><title>ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆ1å¹´ç›®æŒ¯ã‚Šè¿”ã‚Š on 2024-12</title><link href="https://www.hitsumabushi.org/blog/2024/12/14/0200.html" rel="alternate"></link><published>2024-12-14T02:00:00+09:00</published><updated>2024-12-14T02:00:00+09:00</updated><author><name>hitsumabushi</name></author><id>tag:www.hitsumabushi.org,2024-12-14:/blog/2024/12/14/0200.html</id><summary type="html">
&lt;p&gt;ã“ã®æ–‡ç« ã¯ã‚‚ã¨ã‚‚ã¨ã¯ãƒ­ãƒ¼ã‚«ãƒ«ã§è‡ªåˆ†å‘ã‘ã«æ›¸ã„ã¦ã„ãŸã‚‚ã®ã§ã€dumpã—ã¦ã„ã‚‹ã ã‘ã®ã‚‚ã®ã€‚&lt;br/&gt;
ãã®ã†ã¡ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼æ¥­å‹™ã®topicã”ã¨ã«ã€è‡ªåˆ†ãªã‚Šã«ã‚„ã£ã¦ã„ã‚‹ã“ã¨ã‚„ã€è€ƒãˆã¦ã„ã‚‹ã“ã¨ã‚’æ›¸ãèµ·ã“ã—ãŸã„ã€‚&lt;/p&gt;
&lt;hr/&gt;
&lt;h2 id="_1"&gt;ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã«ãªã£ãŸ&lt;/h2&gt;
&lt;p&gt;ã“ã“ã§ã„ã†ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã¨ã¯ã€å°‘äººæ•°ã®ãƒ¡ãƒ³ãƒãƒ¼ã®ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã ã£ãŸã‚Šã€ãƒãƒ¼ãƒ ãƒ¬ãƒ™ãƒ«ã®ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã§ã€&lt;a href="https://jp.indeed.com/career-advice/career-development/manager-vs-senior-manager"&gt;ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã¨ã‚·ãƒ‹ã‚¢ãƒ â€¦&lt;/a&gt;&lt;/p&gt;</summary><content type="html">
&lt;p&gt;ã“ã®æ–‡ç« ã¯ã‚‚ã¨ã‚‚ã¨ã¯ãƒ­ãƒ¼ã‚«ãƒ«ã§è‡ªåˆ†å‘ã‘ã«æ›¸ã„ã¦ã„ãŸã‚‚ã®ã§ã€dumpã—ã¦ã„ã‚‹ã ã‘ã®ã‚‚ã®ã€‚&lt;br/&gt;
ãã®ã†ã¡ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼æ¥­å‹™ã®topicã”ã¨ã«ã€è‡ªåˆ†ãªã‚Šã«ã‚„ã£ã¦ã„ã‚‹ã“ã¨ã‚„ã€è€ƒãˆã¦ã„ã‚‹ã“ã¨ã‚’æ›¸ãèµ·ã“ã—ãŸã„ã€‚&lt;/p&gt;
&lt;hr/&gt;
&lt;h2 id="_1"&gt;ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã«ãªã£ãŸ&lt;/h2&gt;
&lt;p&gt;ã“ã“ã§ã„ã†ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã¨ã¯ã€å°‘äººæ•°ã®ãƒ¡ãƒ³ãƒãƒ¼ã®ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã ã£ãŸã‚Šã€ãƒãƒ¼ãƒ ãƒ¬ãƒ™ãƒ«ã®ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã§ã€&lt;a href="https://jp.indeed.com/career-advice/career-development/manager-vs-senior-manager"&gt;ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã¨ã‚·ãƒ‹ã‚¢ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã®é•ã„ã¨ã¯ | Indeed (ã‚¤ãƒ³ãƒ‡ã‚£ãƒ¼ãƒ‰)&lt;/a&gt;ã‚ãŸã‚ŠãŒã‚¤ãƒ¡ãƒ¼ã‚¸ã«è¿‘ã„ã‹ã‚‚ã€‚&lt;/p&gt;
&lt;p&gt;ç¾çŠ¶ã®ç«‹ã¡ä½ç½®: 2ã¤ã®ãƒãƒ¼ãƒ ã®ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã‚’å…¼å‹™ã—ã¦ã„ã‚‹&lt;br/&gt;
- SREãƒãƒ¼ãƒ ã®ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã®ã†ã¡ã®1äºº&lt;br/&gt;
    - è¿‘ã„ã¨ã“ã‚ã«åŒã˜ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ãŒã„ã‚‹&lt;br/&gt;
    - embedded SREã®ãƒãƒ¼ãƒ ã®ä¸€éƒ¨ã¨SRE CoEçš„ãªãƒãƒ¼ãƒ ã‚’æ‹…å½“&lt;br/&gt;
- å…±é€šã‚¯ãƒ©ã‚¦ãƒ‰ã‚¤ãƒ³ãƒ•ãƒ©ãƒãƒ¼ãƒ ã®ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼&lt;br/&gt;
    - 2024å¹´ã®é€”ä¸­ã‹ã‚‰å…¼å‹™&lt;br/&gt;
    - "å…±é€šã‚¯ãƒ©ã‚¦ãƒ‰ã‚¤ãƒ³ãƒ•ãƒ©"ã§ã‚¤ãƒ¡ãƒ¼ã‚¸ã•ã‚Œã‚‹ã‚ˆã†ãªæ¥­å‹™ã‚’ã„ãã¤ã‹ã®ãƒãƒ¼ãƒ ã§åˆ†æ‹…ã—ã¦ã„ã¦ã€ãã®ã†ã¡ã®1ã¤ã®ãƒãƒ¼ãƒ &lt;br/&gt;
    - ã—ã‹ã—ã€ã“ã“ã§ã¯ã‚¹ã‚¯ãƒ©ãƒ ã®POã‚‚æ‹…ã£ã¦ã„ã‚‹(æš—é»™çš„ã§ã¯ãªãã€æ˜ç¤ºçš„ã«å…¼å‹™ã—ã¦ã„ã‚‹)&lt;/p&gt;
&lt;h2 id="_2"&gt;ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã«ãªã‚‹å‰ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã¨å®Ÿéš›ã®é•ã„&lt;/h2&gt;
&lt;p&gt;ãªã‚“ã¨ãªãã“ã‚Œã¾ã§ã®ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã®æ§˜å­ã‚’è¦‹ã¦ã„ã¦ã€ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã®ä»•äº‹ã«ã¤ã„ã¦ã‚¤ãƒ¡ãƒ¼ã‚¸ã—ã¦ã„ãŸã“ã¨ã¨ã€å®Ÿéš›ã«ä»Šã‚„ã£ã¦ã„ã‚‹æ¥­å‹™ã«ã¯å¤§ããªä¹–é›¢ã¯ãªã„ã€‚ãŸã ã€ã‚„ã¯ã‚Šä¸€éƒ¨æƒ³å®šã¨é•ã†ã¨ã“ã‚ã‚‚ã‚ã‚‹ã€‚&lt;br/&gt;
ã“ã‚Œã¯ä»Šã®çµ„ç¹”ã®è©±ãªã®ã§ã€ä¸€èˆ¬è«–ã§ã¯ãªã„ã‚‚ã®ã‚‚ã‚ã‚‹ãŒã€&lt;br/&gt;
- ã‚¤ãƒ¡ãƒ¼ã‚¸: ã„ã‚ã„ã‚ãªå¹…åºƒã„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚„çµ„ç¹”ã®æ–¹é‡ã‚’çŸ¥ã‚Šã€ãã®æ±ºå®šã‚„å®Ÿè¡Œã«é–¢ã‚ã‚‹ãƒ»å½±éŸ¿ã‚’ä¸ãˆã‚‹ã“ã¨ãŒã§ãã‚‹&lt;br/&gt;
    - å®Ÿéš›: ã§ãã‚‹ãŒã€ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ãƒ¬ãƒ™ãƒ«ã§ã§ããªã„ã“ã¨ã‚‚å¤šã„&lt;br/&gt;
    - ã§ããªã„ã“ã¨ã¨ã—ã¦ã¯ã€è‡ªåˆ†ã®çµ„ç¹”å¤–ã®æ–¹é‡ã¯ç‰¹ã«çŸ¥ã‚‹ã“ã¨ã¯ãã‚“ãªã«å¤šãã¯ãªãã€ã‚ˆã‚Šä¸Šä½ã®ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆã—ã‹å‘¼ã°ã‚Œãªã„ã“ã¨ã‚‚å¤šãã†ã€‚é€šå¸¸ã®ãƒ¡ãƒ³ãƒãƒ¼ã¨åŒã˜ã‚ˆã†ã«å‘¨çŸ¥ã•ã‚ŒãŸã‚‚ã®ã‚’èãã—ã‹ãªã„&lt;br/&gt;
- ã‚¤ãƒ¡ãƒ¼ã‚¸: å€‹äººã¨ã—ã¦ã§ã¯ãªãã¦ã€ãƒãƒ¼ãƒ ã¨ã—ã¦æˆæœã‚’å‡ºã™ã“ã¨ã‚’æ±‚ã‚ã‚‰ã‚Œã‚‹&lt;br/&gt;
    - å®Ÿéš›: æ¦‚ã­æƒ³å®šé€šã‚Š&lt;br/&gt;
    - ãŸã ãƒãƒãƒ¼ã‚¸ã—ã¦ã„ã‚‹ãƒãƒ¼ãƒ ã ã‘ã§ã‚„ã‚‹ã®ã¯é›£ã—ã„å ´åˆã‚‚å¤šãã€ãƒãƒ¼ãƒ ã¨ã—ã¦ã€ã¨ã„ã†ã‚ˆã‚Šã¯çµ„ç¹”ã¨ã—ã¦ã‚„ã‚‹ã¹ãã ã€ã¨æ€ã†ã“ã¨ã‚’é€²ã‚ã‚‹åŠ›ã‚’æŒã¤å¿…è¦ãŒã‚ã‚‹ã¨æ„Ÿã˜ã‚‹ã€‚èª¿æ•´åŠ›ãŒå¿…è¦ã€‚&lt;br/&gt;
- ã‚¤ãƒ¡ãƒ¼ã‚¸: ãƒ¡ãƒ³ãƒãƒ¼ã®è©•ä¾¡ã‚„ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’ã—ã¦ã€è‚²ã¦ãŸã‚Šæˆé•·æ©Ÿä¼šã‚’ä¸ãˆãŸã‚Šã™ã‚‹å¿…è¦ãŒã‚ã‚‹&lt;br/&gt;
    - å®Ÿéš›: å­—é¢ã§ã¯ãã®é€šã‚Šã ãŒã€æƒ³åƒä»¥ä¸Šã«ä»–ã®ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã¯ãƒ¡ãƒ³ãƒãƒ¼ãƒ»ãƒãƒ¼ãƒ ã®æˆé•·ã«ã¤ã„ã¦æ™‚é–“ã‚’å‰²ã„ã¦è€ƒãˆã¦ã„ãŸã€‚(æ˜”ã®è‡ªåˆ†ã‹ã‚‰ã¯ãã†è¦‹ãˆã¦ã„ãªã‹ã£ãŸã€ã¨ã„ã†ã“ã¨ã¯ã€ä»Šã®è‡ªåˆ†ã‚‚ãƒ¡ãƒ³ãƒãƒ¼ã‹ã‚‰ã¯ãã†è¦‹ãˆã¦ã„ãªã„ã¨ã„ã†ã“ã¨ã ã¨æ€ã†)&lt;br/&gt;
    - è©•ä¾¡ã«ã¤ã„ã¦ã¯ã€ä¸€è²«æ€§ãŒã¨ã¦ã‚‚å¤§äº‹ãªã‚“ã ã€ã¨æ€ã£ã¦ã„ãŸãŒã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒå¤šã™ãã¦é›£ã—ãã€ã§ãã¦ã„ãªã„ã‚‚ã‚ã‚‹ã—ã€ä¸€è²«æ€§ã‚ˆã‚Šã‚‚è©•ä¾¡ã•ã‚Œã‚‹äººæœ¬äººã¨ã®å¯¾è©±ã®ã»ã†ãŒå¤§äº‹ãªã®ã‹ã‚‚?ã¨ã„ã†ç–‘å•ã‚‚æ¹§ã„ã¦ããŸã€‚äººã«ã‚ˆã£ã¦è©•ä¾¡ã—ã¦ã»ã—ã„ã“ã¨ã‚‚é•ã†ã€‚ãŸã ã€ç›¸å¯¾è©•ä¾¡ã¨ã„ã†æ„å‘³ã§ã¯ã€ç¢ºå®Ÿã«ã“ã†ã„ã†ç†ç”±ã§ã“ã®äººã¨ã“ã®äººã¯é•ã†è©•ä¾¡ãªã®ã§ã™ã€ã¨ã„ã†èª¬æ˜ãŒã§ãã‚‹ç¨‹åº¦ã«è‡ªåˆ†ã®ãªã‹ã§è¨€èªåŒ–ã—ã¦ã„ã‚‹(ã—ã€ãã‚Œã¯æœ¬äººã«ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã™ã‚‹ãŸã‚ã«ã‚‚å¤§äº‹)&lt;br/&gt;
- ã‚¤ãƒ¡ãƒ¼ã‚¸: ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«æ°—ã‚’ä½¿ã†å¿…è¦ãŒã‚ã‚‹ã€‚ãã®ãŸã‚ã€è‡ªåˆ†ã®ã‚ˆã†ãªäººã¨è©±ã™ã“ã¨ãŒæœ¬è³ªçš„ã«è‹¦æ‰‹ãªäººé–“ã«ã¯é›£ã—ã„ã®ã§ã¯?&lt;br/&gt;
    - å®Ÿéš›: æœ¬å½“ã«ãã†ã€‚ã§ã‚‚ã€ã¿ã‚“ãªå„ªã—ã„ã®ã§ãªã‚“ã¨ã‹ãªã£ã¦ã„ã‚‹ã€‚ä¸€æ–¹ã§ã€äººã«ã‚ˆã£ã¦ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å¥½ã¿ãŒé•ã†ã¨ã„ã†ã¨ã“ã‚ã¯æ„è­˜ã™ã‚‹ã‚ˆã†ã«ãªã£ã¦ãã¦ã¯ã„ã‚‹ã€‚å®Ÿè·µã§ãã¦ã¯ã„ãªã„&lt;br/&gt;
- ã‚¤ãƒ¡ãƒ¼ã‚¸: è¤‡é›‘ãªã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã‚„ã‚‹å¿…è¦ãŒã‚ã‚‹&lt;br/&gt;
    - å®Ÿéš›: å°‘ã—æ„æ€æ±ºå®šã‚’å«ã‚€ã‚‚ã®ã‚„åˆ¥éƒ¨ç½²ã¨ã®ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§é ¼ã‚‰ã‚Œã‚‹ã“ã¨ãŒå¢—ãˆãŸã€‚æ„æ€æ±ºå®šã«ã¤ã„ã¦ã¯ã‚µã‚¤ã‚ºæ„Ÿãªã©æ¬¡ç¬¬ã§ä»»ã›ã¦ã„ãã¹ãã‚‚ã®ã ã¨æ€ã†ã€‚&lt;/p&gt;
&lt;h2 id="_3"&gt;ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã«ãªã£ã¦å¤‰ãˆãŸã“ã¨/å¤‰ã‚ã£ãŸã“ã¨&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;1on1ã®æ™‚é–“ã‚’æ›œæ—¥ã‚„æ ã‚’æ±ºã‚ã¦ã€ç¢ºä¿ã™ã‚‹ã‚ˆã†ã«ãªã£ãŸ&lt;/li&gt;
&lt;li&gt;1on1ã®æ•°ãŒå¤šã„ã®ã§ã€æ›œæ—¥ã‚„æ™‚é–“å¸¯ã‚’ã¾ã¨ã‚ã¦ç¢ºä¿ã™ã‚‹ã‚ˆã†ã«ã—ãŸ&lt;/li&gt;
&lt;li&gt;ä»Šã¯ç«/æ°´/æœ¨ã®åˆå¾ŒãŒãƒ¡ã‚¤ãƒ³&lt;/li&gt;
&lt;li&gt;1on1ã®ä¸­ã§æœ¬äººãŒæ€ã£ã¦ã„ã‚‹æœ€è¿‘ã®æˆæœã‚’æ›¸ã„ã¦ã‚‚ã‚‰ã†ã‚ˆã†ã«ãªã£ãŸ&lt;/li&gt;
&lt;li&gt;ã‚‚ã¨ã‚‚ã¨ã¯è©•ä¾¡ã®æ™‚æœŸã«ãŠäº’ã„ã«å¿˜ã‚Œã¦ã„ã‚‹æˆæœãŒãªã„ã‚ˆã†ã«ã—ãŸã„ã®ã§ã€1on1ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«æ›¸ã„ã¦ã‚‚ã‚‰ã†ã“ã¨ã«ã—ãŸã‚‚ã®ã€‚å…¼å‹™ãŒå¢—ãˆã¦ã‹ã‚‰è©³ç´°ã«æ¥­å‹™ã‚’æŠŠæ¡ã™ã‚‹ã“ã¨ãŒé›£ã—ããªã£ãŸã®ã§ã€å„ãƒ¡ãƒ³ãƒãƒ¼ã®é–¢é€£ã™ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®é€²æ—ã«ã¤ã„ã¦ã®è§£åƒåº¦ã‚‚ä¸ŠãŒã‚‹ã—ã€ãã®é€²ã‚æ–¹ã«ã¤ã„ã¦ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’ã™ã‚‹éš›ã«ã‚‚ä¾¿åˆ©ã«ãªã£ãŸ&lt;/li&gt;
&lt;li&gt;ãŸã¾ã«JIRAã¨è¦‹æ¯”ã¹ã¦ã€æ›¸ã„ã¦ã„ãªã„ã‚‚ã®ã‚’èã„ã¦ã¿ãŸã‚Šã—ã¦ã€(å¿˜ã‚Œã¦ã„ãŸã ã‘ã€ã¨ã„ã†å›ç­”ãŒå¤šã„ãŒ)è©³ç´°ã‚’èãæ©Ÿä¼šã«ã—ã¦ã„ã‚‹&lt;/li&gt;
&lt;li&gt;å®Ÿéš›ã€ä¸­é–“ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã®æ™‚æœŸã«çœºã‚ã¦ã€ã“ã®æˆæœã¯ä»Šã“ã†ã„ã†ã“ã¨ã«ã¤ãªãŒã£ã¦ã„ã‚‹ã€ã¨ã„ã†ç†è§£ã«å½¹ç«‹ã£ã¦ã„ã‚‹&lt;/li&gt;
&lt;li&gt;æ„è­˜çš„ã«è‡ªåˆ†è‡ªèº«ã®æŒ¯ã‚Šè¿”ã‚Šã‚’ã—ã¦ã„ã‚‹&lt;/li&gt;
&lt;li&gt;2é€±é–“~1ãƒ¶æœˆé–“éš”ã§ã€è‡ªåˆ†ã®ã†ã¾ãã§ããŸã“ã¨ã€æ”¹å–„ã§ãã‚‹ã“ã¨ã€ä»Šå¾Œã‚„ã‚‹ã¹ãã“ã¨ã‚’æŒ¯ã‚Šè¿”ã£ã¦ã„ã‚‹&lt;/li&gt;
&lt;li&gt;ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã¯ã‚ã¾ã‚Šè‡ªè¦šçš„ã«æŒ¯ã‚Šè¿”ã‚Šã®æ©Ÿä¼šã‚’æŒãŸãªã‹ã£ãŸã—ã€æ©Ÿä¼šã‚’æŒãŸãªãã¦ã‚‚ä½•ã¨ãªãè©¦è¡ŒéŒ¯èª¤ã®çµæœãŒã‚ã‹ã‚‹ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚‚ã‚ã‚‹ã¨æ€ã£ã¦ã„ã‚‹(ã§ãã‚‹ãªã‚‰ã€æŒ¯ã‚Šè¿”ã‚Šã¯ã—ãŸæ–¹ãŒè‰¯ã„ã¨ã¯æ€ã†)ã€‚ãŸã ã€ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆã¯æ­£è§£ãƒ»ä¸æ­£è§£ãŒã™ãã«ã‚ã‹ã‚‰ãªã„ã—ã€æ­£è§£ã‚‚ã‚ã‚‹ã®ã‹ã‚ã‹ã‚‰ãªã„ã“ã¨ã‚‚å¤šã„ã®ã§ã€æ„è­˜çš„ãªã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã§æ”¹å–„ã‚’ã—ãªã„ã¨ã™ãã«å´©å£Šã—ã¦ã—ã¾ã†æ°—ãŒã—ãŸã€‚ãƒ¡ãƒ³ãƒãƒ¼ã«å¯¾ã™ã‚‹è²¬ä»»ã‚‚ã‚ã‚‹ã®ã§ã€å´©å£Šã—ã¡ã‚ƒã£ãŸğŸ˜…ã€ã§ã¯æ¸ˆã¾ãªã„ã¨ã“ã‚ã‚‚ã‚ã‚‹ã€‚&lt;/li&gt;
&lt;li&gt;è‡ªåˆ†ã«ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆãŒå‘ã„ã¦ã„ãªã„ã¨æ€ã£ã¦ã„ã‚‹ã¨ã„ã†ã®ã‚‚ã‚ã‚‹ã®ã‹ã‚‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä»–ã«å¤‰ãˆãŸã“ã¨ã‚‚å¤šã„ãŒã€ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã¨POã‚’å…¼å‹™ã—ã¦ã€ä¸¡æ–¹ã®å¸½å­ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«é–¢ã‚ã£ã¦ã„ãŸã‚Šã€ãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼ã¨ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã—ã¦ã„ã‚‹é¢ãŒã‚ã‚‹ã®ã§ã€ã‚‚ã†å°‘ã—ã©ã¡ã‚‰ã®ç«‹å ´ã¨ã—ã¦ã‚„ã£ã¦ã„ã‚‹ã®ã‹æ•´ç†ã—ã¦ã‹ã‚‰ã¾ã¨ã‚ãŸã„ã€‚&lt;/p&gt;
&lt;p&gt;ãƒ¡ãƒ³ã‚¿ãƒ«çš„ãªé¢ã§ã¯ã€&lt;br/&gt;
- ã‚ã¾ã‚Šæ¥­å‹™ã®è©³ç´°ãªé€²ã‚æ–¹ã«ç«‹ã¡å…¥ã‚‰ãªããªã£ãŸ&lt;br/&gt;
  - å›°ã£ã¦ã„ãªã„é™ã‚Šã¯å¥½ãã«ã—ã¦ãã‚Œã€ã¨ã„ã†æ°—æŒã¡ã¯ã‚‚ã¨ã‚‚ã¨ã‚ã‚‹ãŒã€Aã®é€²ã‚æ–¹ã¨Bã®é€²ã‚æ–¹ãŒã‚ã£ãŸã¨ãã«ã€ä»¥å‰ã¯è‡ªåˆ†ã¨é•ã†é€²ã‚æ–¹ãªã‚‰Pros/Consèãã“ã¨ã‚‚ã‚ã£ãŸã¨æ€ã†&lt;br/&gt;
  - ä»Šã¯é‡å¤§ãªå•é¡Œã«ãªã‚‰ãªãã†ã§ã‚ã‚Œã°ã€ã¾ãšã‚„ã£ã¦ã¿ã¦ã‚‚ã‚‰ã£ã¦ã€ãã®ã†ã¡æ„Ÿæƒ³ã‚’èã“ã†ã¨ã„ã†æ°—æŒã¡ã«ãªã£ãŸã€‚&lt;br/&gt;
    - ãŸã ã€ãŠæ‰‹ä¸¦ã¿æ‹è¦‹ã«ãªã‚Šã™ããªã„ã‚ˆã†ã«æ°—ã‚’ã¤ã‘ã¦ã„ã‚‹ã€‚ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ãŒã”ã¡ã‚ƒã”ã¡ã‚ƒã„ã†ã¨å¼·åˆ¶åŠ›ãŒã‚ã‚Šè‡ªä¸»æ€§ã‚’å¤±ã†ã¨æ€ã†ãŒã€ã ã‹ã‚‰ã¨è¨€ã£ã¦æ­£è§£ã®é¸æŠè‚¢ãŒã‚ã‚‹ã“ã¨ã‚’éš ã—ãŸã‚Šã€ã¨ã„ã†ã®ã¯é•ã†ã®ã§ã€‚ã‚³ãƒ¼ãƒãƒ³ã‚°ã¨ã®ãƒãƒ©ãƒ³ã‚¹ãŒå¤§äº‹ã ã¨æ€ã£ã¦ã„ã‚‹&lt;/p&gt;
&lt;h2 id="_4"&gt;ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã‚’ã‚„ã£ã¦ã©ã†ã ã£ãŸã‹?&lt;/h2&gt;
&lt;p&gt;ã¾ãšå…¨ä½“ã¨ã—ã¦ã‚„ã£ã¦è‰¯ã‹ã£ãŸã€‚&lt;br/&gt;
ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã«ãªã‚‹ã‹ã€ICã«ãªã‚‹ã‹ã€ãŠãã‚‰ãé¸æŠã§ãã‚‹ç«‹å ´ã«ã‚ã£ãŸãŒã€ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã‚’ä¸€åº¦ã¯çµŒé¨“ã—ãŸã‹ã£ãŸã¨ã„ã†ã“ã¨ã«åŠ ãˆã¦ã€å½“æ™‚ã®SREçµ„ç¹”ã«ã‚‚ã£ã¨ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã®é ­æ•°ãŒå¿…è¦ã§ã€è‡ªåˆ†ãŒé©åˆ‡ãªäººãŒè¦‹å›ã—ã¦ã‚‚é™ã‚‰ã‚Œã¦ã„ãŸã®ã§ã€ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã«ãªã£ãŸã€‚&lt;br/&gt;
ãã®ãŸã‚ã€å°‘ã—åºƒã„ç¯„å›²ã‚’é ˜åŸŸã‚’è¦‹ã‚‹æ©Ÿä¼šã‚’ã‚‚ã‚‰ãˆãŸã—ã€ã‚µãƒãƒ¼ãƒˆã‚‚ã—ã¦ã‚‚ã‚‰ãˆãŸã€‚&lt;/p&gt;
&lt;p&gt;ã¾ãŸSREçµ„ç¹”ã¯é•·ã‚‰ãEmbedded SREã ã‘(ã¨ã„ã†ã‹ã€æ˜”ã¯ã‚¹ã‚¯ãƒ©ãƒ ã«å‚åŠ ã—ãªãŒã‚‰æ¨ªæ–­çš„ãªæ”¹å–„ã‚‚å„è‡ªç©ºã„ãŸæ™‚é–“ã§ã‚„ã£ã¦ã„ã“ã†ã€ã¨ã„ã†æ–‡åŒ–ã ã£ãŸ)ã ã£ãŸãŒã€SRE CoEçš„ãªãƒãƒ¼ãƒ ã‚’ä½œã‚‹ã“ã¨ãŒã§ããŸã®ãŒã€ä¸€ç•ªè‰¯ã‹ã£ãŸã€‚ãŸã ã€ã“ã‚Œã¯è‡ªåˆ†ãŒä½œã£ãŸã¨ã„ã†ã‚ˆã‚Šã¯ä¸Šå¸ã®åŠ›ãŒå¤§ãã„ã€‚ãšã£ã¨ä½œã‚ŠãŸã„ã€ä½œã‚‹ã¹ãã ã¨è¨€ã£ã¦ã€ã„ãã¤ã‹ãƒ—ãƒ©ãƒ³ã‚„ã‚¢ã‚¤ãƒ†ãƒ ã‚’æ›¸ã„ãŸã‚Šã¯ã—ãŸãŒã€ä¸Šä½ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆãªã©ã¨è©±ã—ãŸã‚Šã€ãã®ãŸã‚ã®å°†æ¥åƒã®èª¬æ˜ãªã©ã¯ä¸Šå¸ãŒè¡Œã£ã¦ã„ã‚‹ã€‚ã“ã†ã„ã†èª¿æ•´å«ã‚ã€ã‚„ã£ã¦ã„ãå¿…è¦ãŒã‚ã‚‹ã—ã€ãƒ‘ã‚¹ã‚’æŒã¤å¿…è¦ãŒã‚ã‚‹ã€‚&lt;br/&gt;
ã¨ã¯ã„ãˆã€ãƒãƒ¼ãƒ ã¨ã—ã¦æˆæœã‚’å‡ºã—ã€capabilityã‚’æ‹¡å¤§ã—ã¦ã„ãã“ã¨ã¯ç›®æŒ‡ã—ã¦ã„ããŸã„ã€‚&lt;/p&gt;
&lt;p&gt;ã¾ãŸã§ãã¦ã„ãªã„ã“ã¨ã¨ã—ã¦ã¯ã€ä¸­æœŸæ–¹é‡ã®ç­–å®šã«å…¥ã‚Šè¾¼ã‚€ã“ã¨ã‚„ã€æŠ€è¡“ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆã®ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’ä½œã‚‹ã“ã¨ã ã£ãŸã‚Šã€ã¾ã ã¾ã è¶³ã‚Šãªã„ã“ã¨ãŒã‚ã‚‹ã€‚&lt;br/&gt;
ã‚ã¨ã¯ç¤¾å¤–ã¨ã®äº¤æµã‚‚ã—ã¦ã„ã‹ãªã‘ã‚Œã°ãªã€ã¨ã„ã†æ°—æŒã¡ãŒã‚ã‚‹ã€‚ã©ã†ã—ã¦ã‚‚ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆã¯å€‹åˆ¥çš„ãªè©±ã¨ã€æ™®éçš„ãªè©±ãŒå…¥ã‚Šæ··ã˜ã‚ŠãŒã¡ã§ã€ä»–ç¤¾ã®ã‚±ãƒ¼ã‚¹ã«ã¤ã„ã¦èãã“ã¨ã§ã€æ–°ã—ã„æ™®éæ€§ã«æ°—ã¥ã‘ã‚‹ã‚ˆã†ãªæ°—ãŒã—ã¦ã„ã‚‹ã€‚&lt;/p&gt;</content><category term="blog"></category><category term="management"></category></entry><entry><title>CloudFormation Stackã‚’å®‰å…¨ã«å‰Šé™¤ã™ã‚‹</title><link href="https://www.hitsumabushi.org/blog/2021/10/12/0200.html" rel="alternate"></link><published>2021-10-12T02:00:00+09:00</published><updated>2021-10-12T02:00:00+09:00</updated><author><name>hitsumabushi</name></author><id>tag:www.hitsumabushi.org,2021-10-12:/blog/2021/10/12/0200.html</id><summary type="html">
&lt;p&gt;ä»¥å‰ã€&lt;a href="https://www.hitsumabushi.org/blog/2019/01/25/1454.html"&gt;CloudFormation ã®ä¸æº€ç‚¹&lt;/a&gt; ã¨ã„ã†ã®ã‚’æ›¸ã„ãŸãŒã€è«¦ã‚ã¦å¤§åŠã®Cfnã‚’terraformã«ç§»è¡Œã—ãŸã€‚&lt;br/&gt;
ãã®éš›ã€cfn ãƒªã‚½ãƒ¼ã‚¹ã‚’ãã‚Œã„ã«ã™ã‚‹ãŸã‚ã«ã€cfn stackã‚’å®‰å…¨ã«å‰Šé™¤ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã€ãã®æ–¹æ³•ã‚’ãƒ¡ãƒ¢ã—ã¦ãŠãã€‚&lt;/p&gt;
&lt;h2 id="_1"&gt;æ¦‚è¦&lt;/h2&gt;
&lt;p&gt;ã‚¢ã‚¤ãƒ‡ã‚¢ã¯ç°¡å˜ã§ä»¥ä¸‹ã®é€šã‚Šã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;cfn ã®æ“ä½œã®ã¿ãŒè¨±å¯ã•ã‚Œã¦ã„ã‚‹IAM roleã‚’ä½œæˆã™ã‚‹&lt;/li&gt;
&lt;li&gt;ä¸Šè¨˜roleã‚’æŒ‡å®šã—ã¦ cfn stackã‚’deleteã™ã‚‹&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="_2"&gt;ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³&lt;/h2&gt;
&lt;p&gt;ãã‚‚ãã‚‚ä»¥å‰ã®è¨˜äº‹ã§ã‚‚ã€äºˆæœŸã›ã¬æ‰‹ä½œæ¥­ã® â€¦&lt;/p&gt;</summary><content type="html">
&lt;p&gt;ä»¥å‰ã€&lt;a href="https://www.hitsumabushi.org/blog/2019/01/25/1454.html"&gt;CloudFormation ã®ä¸æº€ç‚¹&lt;/a&gt; ã¨ã„ã†ã®ã‚’æ›¸ã„ãŸãŒã€è«¦ã‚ã¦å¤§åŠã®Cfnã‚’terraformã«ç§»è¡Œã—ãŸã€‚&lt;br/&gt;
ãã®éš›ã€cfn ãƒªã‚½ãƒ¼ã‚¹ã‚’ãã‚Œã„ã«ã™ã‚‹ãŸã‚ã«ã€cfn stackã‚’å®‰å…¨ã«å‰Šé™¤ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã€ãã®æ–¹æ³•ã‚’ãƒ¡ãƒ¢ã—ã¦ãŠãã€‚&lt;/p&gt;
&lt;h2 id="_1"&gt;æ¦‚è¦&lt;/h2&gt;
&lt;p&gt;ã‚¢ã‚¤ãƒ‡ã‚¢ã¯ç°¡å˜ã§ä»¥ä¸‹ã®é€šã‚Šã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;cfn ã®æ“ä½œã®ã¿ãŒè¨±å¯ã•ã‚Œã¦ã„ã‚‹IAM roleã‚’ä½œæˆã™ã‚‹&lt;/li&gt;
&lt;li&gt;ä¸Šè¨˜roleã‚’æŒ‡å®šã—ã¦ cfn stackã‚’deleteã™ã‚‹&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="_2"&gt;ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³&lt;/h2&gt;
&lt;p&gt;ãã‚‚ãã‚‚ä»¥å‰ã®è¨˜äº‹ã§ã‚‚ã€äºˆæœŸã›ã¬æ‰‹ä½œæ¥­ã®å¤‰æ›´ãŒã‚ã£ãŸå ´åˆã«ã€ãƒ‰ãƒªãƒ•ãƒˆæ¤œå‡ºã‚„Change setã§æ¤œå‡ºãƒ»å¯¾å¿œãŒé›£ã—ã„ã“ã¨ã‚’å•é¡Œã¨ã—ã¦ã„ãŸã€‚&lt;br/&gt;
cfn stackã‚’å‰Šé™¤ã—ã‚ˆã†ã¨æ€ã£ãŸå ´åˆã€ãƒ‰ãƒªãƒ•ãƒˆã—ã¦ã„ã‚‹çŠ¶æ…‹ã ã¨ã€å˜ç´”ã«ã¯å‰Šé™¤ã§ããªã„ã€‚ä¸€æ—¦cfn updateã™ã‚Œã°ç°¡å˜ã‹ã‚‚ã—ã‚Œãªã„ãŒã€ä½•ã‹æ‰‹ä½œæ¥­ã§å¤‰æ›´ã•ã‚Œã¦ã„ã‚‹ã‹ã‚‚ã—ã‚Œãªã„çŠ¶æ³ã ã¨ã€updateã—ãŸããªã„ã€‚&lt;br/&gt;
cfn updateã‚’ã›ãšã«ã€å®‰å…¨ã«cfn stackã‚’deleteã—ãŸã„ã€‚&lt;/p&gt;
&lt;h2 id="_3"&gt;æ–¹æ³•&lt;/h2&gt;
&lt;h3 id="cfniam-role"&gt;cfnã®æ“ä½œã—ã‹ã§ããªã„IAM roleã‚’ä½œæˆã™ã‚‹&lt;/h3&gt;
&lt;p&gt;ä»¥ä¸‹ã®é€šã‚Šã€terraformã§ä½œæˆã—ãŸã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kr"&gt;resource&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nc"&gt;"aws_iam_role"&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;"delete_cfn_stack"&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="na"&gt;name&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;"delete-cfn-stack"&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="na"&gt;path&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;"/"&lt;/span&gt;

&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="na"&gt;assume_role_policy&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;jsonencode&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="na"&gt;Version&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;"2012-10-17"&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="na"&gt;Statement&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="na"&gt;Action&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;"sts:AssumeRole"&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="na"&gt;Effect&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;"Allow"&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="na"&gt;Sid&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;""&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nb"&gt;Principal&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="na"&gt;Service&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;"cloudformation.amazonaws.com"&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kr"&gt;resource&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nc"&gt;"aws_iam_role_policy"&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;"delete_cfn_stack_policy"&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="na"&gt;name&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;"cfn_policy"&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="na"&gt;role&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;aws_iam_role.delete_cfn_stack.id&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="na"&gt;policy&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;jsonencode&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="na"&gt;Version&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;"2012-10-17"&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="na"&gt;Statement&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="na"&gt;Effect&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;"Allow"&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="na"&gt;Action&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;
&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="s2"&gt;"cloudformation:*"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="na"&gt;Resource&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;"*"&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id="role"&gt;ä¸Šè¨˜ã®roleã§ã‚¹ã‚¿ãƒƒã‚¯å‰Šé™¤ã™ã‚‹&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nb"&gt;export&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;STACK_NAME&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;stack_name

&lt;span class="c1"&gt;# å¤±æ•—ã™ã‚‹deleteã‚’å®Ÿè¡Œ&lt;/span&gt;
aws&lt;span class="w"&gt; &lt;/span&gt;cloudformation&lt;span class="w"&gt; &lt;/span&gt;delete-stack&lt;span class="w"&gt; &lt;/span&gt;--role-arn&lt;span class="w"&gt; &lt;/span&gt;arn:aws:iam::_aws_account_id_:role/delete-cfn-stack&lt;span class="w"&gt; &lt;/span&gt;--stack-name&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;STACK_NAME&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;

&lt;span class="c1"&gt;# resource idã®ãƒªã‚¹ãƒˆã‚’å–å¾—&lt;/span&gt;
aws&lt;span class="w"&gt; &lt;/span&gt;cloudformation&lt;span class="w"&gt; &lt;/span&gt;describe-stack-resources&lt;span class="w"&gt; &lt;/span&gt;--stack-name&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;STACK_NAME&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;jq&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;'.StackResources[].LogicalResourceId'&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;xargs

&lt;span class="c1"&gt;# å‰Šé™¤ã—ãªã„ãƒªã‚½ãƒ¼ã‚¹ã¨ã—ã¦ä¸Šã®çµæœã‚’æŒ‡å®š&lt;/span&gt;
aws&lt;span class="w"&gt; &lt;/span&gt;cloudformation&lt;span class="w"&gt; &lt;/span&gt;delete-stack&lt;span class="w"&gt; &lt;/span&gt;--role-arn&lt;span class="w"&gt; &lt;/span&gt;arn:aws:iam::_aws_account_id_:role/delete-cfn-stack&lt;span class="w"&gt; &lt;/span&gt;--stack-name&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;STACK_NAME&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;--retain-resources&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;â†‘ã®çµæœã‚’ãƒšãƒ¼ã‚¹ãƒˆ&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id="_4"&gt;çµ‚ã‚ã‚Š&lt;/h2&gt;
&lt;p&gt;åœ°é“ã«terraform importã—ã¦ã‹ã‚‰ã€ä¸Šè¨˜ã‚’ã‚³ãƒ„ã‚³ãƒ„(ã‚¹ã‚¯ãƒªãƒ—ãƒˆåŒ–ã—ã¦)å®Ÿè¡Œã—ã¦ã€cfn stackã‚’å‰Šé™¤ã—ãŸã€‚&lt;br/&gt;
terraform importã¯å˜ç´”ã«å·®åˆ†ãŒãªããªã‚‹ã¾ã§tf fileã‚’ä¿®æ­£ã™ã‚‹ã ã‘ãªã®ã§ã€ãã‚“ãªã«å›°ã‚‹ã“ã¨ã¯ãªã„ã€‚&lt;br/&gt;
ã“ã‚Œã§å®‰å¿ƒãƒ»å®‰å…¨ã«ãƒªã‚½ãƒ¼ã‚¹ç®¡ç†ã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚&lt;/p&gt;</content><category term="blog"></category><category term="aws"></category><category term="cloudformation"></category></entry><entry><title>1Password CLIã‚’ä½¿ã£ã¦TOTPã‚’å–å¾—ã™ã‚‹</title><link href="https://www.hitsumabushi.org/blog/2021/10/12/0100.html" rel="alternate"></link><published>2021-10-12T01:00:00+09:00</published><updated>2021-10-12T01:00:00+09:00</updated><author><name>hitsumabushi</name></author><id>tag:www.hitsumabushi.org,2021-10-12:/blog/2021/10/12/0100.html</id><summary type="html">
&lt;p&gt;2è¦ç´ èªè¨¼ã‚’å¿…é ˆã«ã—ãŸAWSã®switch roleã§ã€temporary credentialsã‚’CLIã§å–å¾—ã—ãŸã‹ã£ãŸã€‚&lt;br/&gt;
TOTPã®æ•°å­—ã‚’æ¯å›èª¿ã¹ã‚‹ã®ãŒé¢å€’ã§ã€ç°¡å˜ã«ã§ããªã„ã‹èª¿ã¹ãŸã¨ã“ã‚ã€1Password CLIã¨ã„ã†ã®ãŒã‚ã£ãŸã€‚1Passwordãƒ¦ãƒ¼ã‚¶ãªã®ã§ã€ã“ã‚Œã‚’åˆ©ç”¨ã™ã‚‹ã€‚&lt;br/&gt;
ãŸã ã—ã€å½“ç„¶ã®ã“ã¨ã ãŒã€2è¦ç´ èªè¨¼ã®ãƒ‡ãƒã‚¤ã‚¹ã¨ã—ã¦ã€1PasswordãŒåˆ©ç”¨ã•ã‚Œã¦ã„ã‚‹çŠ¶æ³ã¨ã™ã‚‹ã€‚&lt;/p&gt;
&lt;h2 id="1password-cli"&gt;1Password CLIã®åˆæœŸè¨­å®š&lt;/h2&gt;
&lt;p&gt;1Password CLI ã‚’åˆ©ç”¨ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚&lt;br/&gt;
&lt;a href="https://support.1password.com/command-line-getting-started/"&gt;1Password CLIã®Getting Started&lt;/a&gt;ã‚’è¦‹ã¦ã€åˆæœŸè¨­å®š â€¦&lt;/p&gt;</summary><content type="html">
&lt;p&gt;2è¦ç´ èªè¨¼ã‚’å¿…é ˆã«ã—ãŸAWSã®switch roleã§ã€temporary credentialsã‚’CLIã§å–å¾—ã—ãŸã‹ã£ãŸã€‚&lt;br/&gt;
TOTPã®æ•°å­—ã‚’æ¯å›èª¿ã¹ã‚‹ã®ãŒé¢å€’ã§ã€ç°¡å˜ã«ã§ããªã„ã‹èª¿ã¹ãŸã¨ã“ã‚ã€1Password CLIã¨ã„ã†ã®ãŒã‚ã£ãŸã€‚1Passwordãƒ¦ãƒ¼ã‚¶ãªã®ã§ã€ã“ã‚Œã‚’åˆ©ç”¨ã™ã‚‹ã€‚&lt;br/&gt;
ãŸã ã—ã€å½“ç„¶ã®ã“ã¨ã ãŒã€2è¦ç´ èªè¨¼ã®ãƒ‡ãƒã‚¤ã‚¹ã¨ã—ã¦ã€1PasswordãŒåˆ©ç”¨ã•ã‚Œã¦ã„ã‚‹çŠ¶æ³ã¨ã™ã‚‹ã€‚&lt;/p&gt;
&lt;h2 id="1password-cli"&gt;1Password CLIã®åˆæœŸè¨­å®š&lt;/h2&gt;
&lt;p&gt;1Password CLI ã‚’åˆ©ç”¨ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚&lt;br/&gt;
&lt;a href="https://support.1password.com/command-line-getting-started/"&gt;1Password CLIã®Getting Started&lt;/a&gt;ã‚’è¦‹ã¦ã€åˆæœŸè¨­å®šã™ã‚‹ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$&lt;span class="w"&gt; &lt;/span&gt;op&lt;span class="w"&gt; &lt;/span&gt;signin&lt;span class="w"&gt; &lt;/span&gt;_1password_url_&lt;span class="w"&gt; &lt;/span&gt;_signin_address_
...&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;# Secret Key, Password, (è¨­å®šã—ã¦ã„ã‚Œã°TOTPã®6-digit)ã‚’èã‹ã‚Œã‚‹&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;çŸ­ç¸®å½¢ãŒ &lt;code&gt;_1password_url_&lt;/code&gt; ã‹ã‚‰è‡ªå‹•çš„ã«æ±ºã¾ã‚‹ãŒã€ã©ã†ã—ã¦ã‚‚æŒ‡å®šã—ãŸã„å ´åˆã«ã¯ã€ &lt;code&gt;--shorthand&lt;/code&gt;ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§æŒ‡å®šã™ã‚‹ã€‚&lt;/p&gt;
&lt;h2 id="totp"&gt;TOTPã®å–å¾—&lt;/h2&gt;
&lt;p&gt;é€šå¸¸ã®1password appã®ã‚ˆã†ã«ã€30minã‚¢ã‚¯ã‚»ã‚¹ãŒãªã‘ã‚Œã°ã€ãƒ­ãƒƒã‚¯ã•ã‚Œã‚‹ãŸã‚ã€ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®å…¥åŠ›ãŒå¿…è¦ã€‚&lt;br/&gt;
1passwordã®URLãŒ &lt;code&gt;example.1password.com&lt;/code&gt; ã§ã‚ã‚Œã°ã€&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;eval&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;op&lt;span class="w"&gt; &lt;/span&gt;signin&lt;span class="w"&gt; &lt;/span&gt;example&lt;span class="k"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã¨ã—ã¦ã€å†èªè¨¼ã™ã‚‹ã€‚&lt;br/&gt;
ç’°å¢ƒå¤‰æ•° &lt;code&gt;OP_SESSION_example&lt;/code&gt; ã«èªè¨¼ã—ãŸã¨ãã®sessionæƒ…å ±ãŒè¼‰ã‚‹ã€‚(&lt;code&gt;--session&lt;/code&gt; ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§å„ã‚³ãƒãƒ³ãƒ‰ã”ã¨ã«æ¸¡ã—ã¦ã‚‚è‰¯ã„)&lt;/p&gt;
&lt;p&gt;TOTPã‚’å–å¾—ã™ã‚‹ã«ã¯ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$&lt;span class="w"&gt; &lt;/span&gt;op&lt;span class="w"&gt; &lt;/span&gt;get&lt;span class="w"&gt; &lt;/span&gt;totp&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;"UUID or Name"&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;UUIDã§æŒ‡å®šã—ãŸã„å ´åˆã«ã¯ã€ &lt;code&gt;op list items --categories Login&lt;/code&gt; ã®çµæœã‚’jqãªã©ã§èª¿ã¹ã¦ã€å–å¾—ã™ã‚‹ã€‚&lt;/p&gt;
&lt;h2 id="_1"&gt;çµ‚ã‚ã‚Š&lt;/h2&gt;
&lt;p&gt;ä»¥ä¸Šã§æ¦‚ã­ã‚„ã‚ŠãŸã‹ã£ãŸã€CLIã§TOTPã‚’å–å¾—ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚&lt;br/&gt;
æœ€è¿‘1Passwordã¯Linux Desktopå‘ã‘ã®ã‚¢ãƒ—ãƒªã‚’å‡ºã—ã¦ã„ãŸã‚Šã—ã¦ã„ã‚‹ã®ã§ã€ã‚‚ã†å°‘ã—çœŸé¢ç›®ã«ä½¿ã£ã¦ã„ããŸã„æ‰€å­˜ã€‚&lt;/p&gt;
&lt;p&gt;ã¡ãªã¿ã«ã€è¤‡æ•°ã®ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã®åˆ‡ã‚Šæ›¿ãˆãªã©ã§ä¾¿åˆ©ãªã‚ˆã†ã«ã€ &lt;a href="https://github.com/99designs/aws-vault"&gt;99designs/aws-vault&lt;/a&gt;ã¨ã„ã†ã®ã‚‚ã‚ã‚‹ã‚‰ã—ã„ãŒã€ç‰¹ã«ä½¿ã‚ãšã«è‡ªå‰ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ä½¿ã£ã¦ã„ã‚‹ã€‚&lt;/p&gt;</content><category term="blog"></category><category term="aws"></category><category term="1password"></category></entry><entry><title>Python ã§ã‚³ãƒ¡ãƒ³ãƒˆä»˜ãYAMLã‚’æ‰±ã†æ™‚ã«ã¯ ruamel.yaml ãŒä¾¿åˆ©ã ã£ãŸ</title><link href="https://www.hitsumabushi.org/blog/2019/02/12/1630.html" rel="alternate"></link><published>2019-02-12T16:30:00+09:00</published><updated>2019-02-12T16:30:00+09:00</updated><author><name>hitsumabushi</name></author><id>tag:www.hitsumabushi.org,2019-02-12:/blog/2019/02/12/1630.html</id><summary type="html">
&lt;h2 id="_1"&gt;è³‡æ–™&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://yaml.readthedocs.io/en/latest/"&gt;Document: ruamel.yaml&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://bitbucket.org/ruamel/yaml/"&gt;Repository: ruamel.yaml&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="_2"&gt;èƒŒæ™¯&lt;/h2&gt;
&lt;p&gt;ã¨ã‚ã‚‹ yamlã§æ›¸ã‹ã‚ŒãŸconfigãƒ•ã‚¡ã‚¤ãƒ«ç¾¤(æ•°ç™¾ãƒ•ã‚¡ã‚¤ãƒ«)ã‚’ä¸€æ‹¬ã§å¤‰æ›´ã—ãŸã„ã“ã¨ãŒã‚ã£ãŸã€‚&lt;br/&gt;
sedã§å¤‰æ›´ã™ã‚‹ã«ã¯å°‘ã—é›£ã—ã‹ã£ãŸã®ã§ã€ãƒ‘ãƒ¼ã‚¹ã—ã¦ã‹ã‚‰æ¡ä»¶åˆ¤å®šã—ã¦ã€æ›¸ãæ›ãˆãŸã„ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ã‚³ãƒ¡ãƒ³ãƒˆã¯æ¶ˆã—ãŸããªã„&lt;/li&gt;
&lt;li&gt;ãƒ–ãƒ­ãƒƒã‚¯ã‚¹ã‚¿ã‚¤ãƒ«ã®ã¾ã¾ã«ã—ãŸã„&lt;/li&gt;
&lt;li&gt;diff ã‚’æœ€å°é™ã«ã—ãŸã„ (ç´°ã‹ã„ä¸­èº«ã‚’çŸ¥ã‚‰ãªã„ã®ã§ã€ãƒã‚§ãƒƒã‚¯ã™ã‚‹ã®ãŒé¢å€’)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="ruamelyaml"&gt;ruamel.yaml&lt;/h2&gt;
&lt;p&gt;python ã§ yaml ã‚’æ‰±ã†ã¨ãã¯ â€¦&lt;/p&gt;</summary><content type="html">
&lt;h2 id="_1"&gt;è³‡æ–™&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://yaml.readthedocs.io/en/latest/"&gt;Document: ruamel.yaml&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://bitbucket.org/ruamel/yaml/"&gt;Repository: ruamel.yaml&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="_2"&gt;èƒŒæ™¯&lt;/h2&gt;
&lt;p&gt;ã¨ã‚ã‚‹ yamlã§æ›¸ã‹ã‚ŒãŸconfigãƒ•ã‚¡ã‚¤ãƒ«ç¾¤(æ•°ç™¾ãƒ•ã‚¡ã‚¤ãƒ«)ã‚’ä¸€æ‹¬ã§å¤‰æ›´ã—ãŸã„ã“ã¨ãŒã‚ã£ãŸã€‚&lt;br/&gt;
sedã§å¤‰æ›´ã™ã‚‹ã«ã¯å°‘ã—é›£ã—ã‹ã£ãŸã®ã§ã€ãƒ‘ãƒ¼ã‚¹ã—ã¦ã‹ã‚‰æ¡ä»¶åˆ¤å®šã—ã¦ã€æ›¸ãæ›ãˆãŸã„ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ã‚³ãƒ¡ãƒ³ãƒˆã¯æ¶ˆã—ãŸããªã„&lt;/li&gt;
&lt;li&gt;ãƒ–ãƒ­ãƒƒã‚¯ã‚¹ã‚¿ã‚¤ãƒ«ã®ã¾ã¾ã«ã—ãŸã„&lt;/li&gt;
&lt;li&gt;diff ã‚’æœ€å°é™ã«ã—ãŸã„ (ç´°ã‹ã„ä¸­èº«ã‚’çŸ¥ã‚‰ãªã„ã®ã§ã€ãƒã‚§ãƒƒã‚¯ã™ã‚‹ã®ãŒé¢å€’)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="ruamelyaml"&gt;ruamel.yaml&lt;/h2&gt;
&lt;p&gt;python ã§ yaml ã‚’æ‰±ã†ã¨ãã¯ã€PyYAML ãŒæœ‰åã ã¨æ€ã†ã€‚&lt;br/&gt;
PyYAMLã‚’ä½¿ã†å ´åˆã€yamlã‚’loadã—ã¦dumpã™ã‚‹ã¨ã€ãƒ•ãƒ­ãƒ¼ã‚¹ã‚¿ã‚¤ãƒ«ãªã®ã¯å¤‰æ›´ã§ãã‚‹ãŒã€&lt;br/&gt;
ã‚³ãƒ¡ãƒ³ãƒˆã¯æ¶ˆãˆã¦ã—ã¾ã†ã®ã«å¯¾å¿œã™ã‚‹ã®ãŒç°¡å˜ã§ã¯ãªã„(ã¨æ€ã£ã¦ã„ã‚‹)ã€‚&lt;/p&gt;
&lt;p&gt;ruamel.yaml ã¯PyYAMLã‚’ãƒ•ã‚©ãƒ¼ã‚¯ã—ãŸã‚‚ã®ã§ã€YAML 1.2 ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ã—ã€ã‚³ãƒ¡ãƒ³ãƒˆã‚„ã‚¹ã‚¿ã‚¤ãƒ«ã€ã‚­ãƒ¼ã®é †ç•ªã‚’ä¿ã¤loaderãŒå®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã€‚&lt;br/&gt;
https://yaml.readthedocs.io/en/latest/overview.html&lt;/p&gt;
&lt;h3 id="_3"&gt;ä½¿ã„æ–¹&lt;/h3&gt;
&lt;p&gt;ä½¿ã„æ–¹ã¨ã—ã¦ã¯ã€ load, dumpã®ä»£ã‚ã‚Šã«ã€ &lt;code&gt;round_trip_load&lt;/code&gt;, &lt;code&gt;round_trip_dump&lt;/code&gt; ã‚’ä½¿ãˆã°è‰¯ã„ã€‚&lt;br/&gt;
ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯è‡ªåˆ†ãŒä½¿ã£ã¦ã„ã‚‹configã«åˆã‚ã›ã¦ä½¿ãˆã°è‰¯ã„ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;ruamel.yaml&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;os&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;process&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;filepath&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="nb"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;filepath&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'r+'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ruamel&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;yaml&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;round_trip_load&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;preserve_quotes&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;True&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="c1"&gt;# å¿…è¦ãªå‡¦ç†ã‚’ã™ã‚‹&lt;/span&gt;
        &lt;span class="c1"&gt;# data["foo"] = "bar"&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;rewrite&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;seek&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="n"&gt;ruamel&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;yaml&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;round_trip_dump&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;explicit_start&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;True&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;truncate&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;pathname&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;dirnames&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;filenames&lt;/span&gt;  &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;walk&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'.'&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;filename&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;filenames&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;pathname&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;/&lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;filename&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;process&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;pathname&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;/&lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;filename&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content><category term="blog"></category><category term="python"></category><category term="yaml"></category></entry><entry><title>CloudFormation ã®ä¸æº€ç‚¹</title><link href="https://www.hitsumabushi.org/blog/2019/01/25/1454.html" rel="alternate"></link><published>2019-01-25T14:54:00+09:00</published><updated>2019-01-25T14:54:00+09:00</updated><author><name>hitsumabushi</name></author><id>tag:www.hitsumabushi.org,2019-01-25:/blog/2019/01/25/1454.html</id><summary type="html">
&lt;p&gt;ä»¥ä¸‹ã§ã¯ã€Œæ‰‹ä½œæ¥­ã§ã€ã¨ã„ã†ã®ã¯ã€ã€ŒCloudFormationç®¡ç†å¤–ã§ã€ã¨ã„ã†æ„å‘³ã§ä½¿ã†ã€‚&lt;/p&gt;
&lt;h2 id="_1"&gt;è¦ç‚¹&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;CloudFormation ã¯ã€ãƒªã‚½ãƒ¼ã‚¹ãŒä½•ã‹ã®ç†ç”±ã§æ‰‹ä½œæ¥­ã§å¤‰æ›´ã•ã‚Œã¦ã„ãŸå ´åˆã«å®‰å…¨ã«æ“ä½œã§ããªã„&lt;/li&gt;
&lt;li&gt;Drift æ¤œå‡ºã¯èª¤æ¤œå‡ºãŒå¤šã™ãã¦ä½¿ã„ã¥ã‚‰ã„&lt;/li&gt;
&lt;li&gt;Change Set ã¯å‹•ã„ã¦ã„ã‚‹çŠ¶æ…‹ã¨ã®å·®åˆ†ã‚’è¦‹ã¦ã„ãªã„ã®ã§ã€ä¿¡ç”¨ã§ããªã„&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="_2"&gt;çµŒç·¯&lt;/h2&gt;
&lt;p&gt;CloudFormation ã§ç®¡ç†ã•ã‚Œã¦ã„ã‚‹ãƒªã‚½ãƒ¼ã‚¹ã™ã¹ã¦ã«ã¤ã„ã¦ã€æ–°ã—ã„ã‚¿ã‚°ã‚’ã¤ã‘ãŸããªã£ãŸã€‚&lt;br/&gt;
ãŸã ã€å„ã‚µãƒ¼ãƒ“ â€¦&lt;/p&gt;</summary><content type="html">
&lt;p&gt;ä»¥ä¸‹ã§ã¯ã€Œæ‰‹ä½œæ¥­ã§ã€ã¨ã„ã†ã®ã¯ã€ã€ŒCloudFormationç®¡ç†å¤–ã§ã€ã¨ã„ã†æ„å‘³ã§ä½¿ã†ã€‚&lt;/p&gt;
&lt;h2 id="_1"&gt;è¦ç‚¹&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;CloudFormation ã¯ã€ãƒªã‚½ãƒ¼ã‚¹ãŒä½•ã‹ã®ç†ç”±ã§æ‰‹ä½œæ¥­ã§å¤‰æ›´ã•ã‚Œã¦ã„ãŸå ´åˆã«å®‰å…¨ã«æ“ä½œã§ããªã„&lt;/li&gt;
&lt;li&gt;Drift æ¤œå‡ºã¯èª¤æ¤œå‡ºãŒå¤šã™ãã¦ä½¿ã„ã¥ã‚‰ã„&lt;/li&gt;
&lt;li&gt;Change Set ã¯å‹•ã„ã¦ã„ã‚‹çŠ¶æ…‹ã¨ã®å·®åˆ†ã‚’è¦‹ã¦ã„ãªã„ã®ã§ã€ä¿¡ç”¨ã§ããªã„&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="_2"&gt;çµŒç·¯&lt;/h2&gt;
&lt;p&gt;CloudFormation ã§ç®¡ç†ã•ã‚Œã¦ã„ã‚‹ãƒªã‚½ãƒ¼ã‚¹ã™ã¹ã¦ã«ã¤ã„ã¦ã€æ–°ã—ã„ã‚¿ã‚°ã‚’ã¤ã‘ãŸããªã£ãŸã€‚&lt;br/&gt;
ãŸã ã€å„ã‚µãƒ¼ãƒ“ã‚¹ã®æ‹…å½“è€…ã”ã¨ã«ã‚ã‚‹ç¨‹åº¦è‡ªç”±ã«ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã§ãã‚‹ãŸã‚ã€æ‰‹å‹•ã§å¤‰æ›´ã•ã‚Œã¦ã„ãªã„ã‹ã€ä¸€å¿œèª¿ã¹ã¦ãŠã“ã†ã¨æ€ã„ã€&lt;br/&gt;
&lt;a href="https://aws.amazon.com/jp/blogs/news/new-cloudformation-drift-detection/"&gt;2018-11 ã«ãƒªãƒªãƒ¼ã‚¹ã•ã‚ŒãŸãƒ‰ãƒªãƒ•ãƒˆæ¤œå‡º&lt;/a&gt; ã‚’ä½¿ã£ã¦ã€&lt;br/&gt;
æ‰‹ä½œæ¥­ã§å®Ÿæ–½ã•ã‚ŒãŸå¤‰æ›´ç‚¹ã‚‚CloudFormationã«å–ã‚Šè¾¼ã¿ã¤ã¤ã€å¯¾å¿œã—ã‚ˆã†ã¨ã—ãŸã€‚&lt;/p&gt;
&lt;h2 id="_3"&gt;æœŸå¾…ã—ãŸã“ã¨&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;CloudFormation ã®ã‚¹ã‚¿ãƒƒã‚¯ãŒãŸãã•ã‚“ã‚ã‚‹ãŸã‚ã€1ã¤1ã¤ç´°ã‹ãå·®åˆ†ã‚’è¦‹ã¦ä¿®æ­£ã™ã‚‹ã“ã¨ãŒé›£ã—ã„&lt;/li&gt;
&lt;li&gt;ãƒ‰ãƒªãƒ•ãƒˆæ¤œå‡ºã•ã‚ŒãŸã¨ã“ã‚ã ã‘1ã¤ãšã¤ä¿®æ­£ã—ã¦ã„ã£ã¦ã€Change Setã‚’ä½œã‚ŠãªãŒã‚‰ç¾çŠ¶ã«åˆã‚ã›ãŸã„&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="_4"&gt;å®Ÿéš›&lt;/h2&gt;
&lt;h3 id="_5"&gt;ãƒ‰ãƒªãƒ•ãƒˆæ¤œå‡º&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ã‚µãƒãƒ¼ãƒˆã•ã‚Œã‚‹ãƒªã‚½ãƒ¼ã‚¹ãŒå°‘ãªã„&lt;/li&gt;
&lt;li&gt;&lt;a href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/using-cfn-stack-drift-resource-list.html"&gt;Resources that Support Drift Detection&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;ãã‚‚ãã‚‚èª¤æ¤œå‡ºãŒå¤šã„&lt;/li&gt;
&lt;li&gt;&lt;a href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/using-cfn-stack-drift.html?shortFooter=true#drift-considerations"&gt;Detecting Unmanaged Configuration Changes to Stacks and Resources&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;LBã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãªã©ã€é…åˆ—ã§å®šç¾©ã•ã‚Œã‚‹ã¨ã“ã‚ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã§åŸ‹ã‚ã‚‰ã‚ŒãŸã ã‘ã§ã€ãƒ‰ãƒªãƒ•ãƒˆãŒæ¤œå‡ºã•ã‚Œã‚‹&lt;/li&gt;
&lt;li&gt;ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ã®(ã¨AWSãŒä¸»å¼µã—ã¦ã„ã‚‹)èª¤æ¤œå‡ºã«è©²å½“ã™ã‚‹ã®ã‹ã€ç›®ã§è¦‹ã¦è€ƒãˆã‚‹ä»¥å¤–ã®æ–¹æ³•ãŒãªã„&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="change-set"&gt;Change Set&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å®Ÿéš›ã«å‹•ã„ã¦ã„ã‚‹ã‚·ã‚¹ãƒ†ãƒ ã¨ã®å·®åˆ†ã‚’è¦‹ã¦ã„ãªã„&lt;/li&gt;
&lt;li&gt;å‰å›ã®è¨­å®šã¨ã®ã‚¹ã‚¿ãƒƒã‚¯ã®å·®åˆ†ã‚’è¦‹ã¦ã„ã‚‹&lt;/li&gt;
&lt;li&gt;æ‰‹ä½œæ¥­ã§å¤‰æ›´ã•ã‚Œã¦ã„ã‚‹ã¨Change Setã®å®Ÿè¡Œã«å¤±æ•—ã™ã‚‹(å®Ÿéš›ã«ã¯å·®åˆ†ãŒãªã„ã®ã§)&lt;/li&gt;
&lt;li&gt;ãã®å ´åˆ Update Stack ã™ã‚‹ã—ã‹ãªã„&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¾‹ãˆã°ã€æ‰‹ä½œæ¥­ã§ã‚¿ã‚°ã‚’å¢—ã‚„ã—ãŸã¨ã—ã¦ã€ç¿Œå–¶æ¥­æ—¥ã«CloudFormationã«åæ˜ ã—ãŸã„ã€ã¨æ€ã£ãŸå ´åˆã€&lt;br/&gt;
ãƒ‰ãƒªãƒ•ãƒˆæ¤œå‡ºã§èª¤æ¤œçŸ¥ã‚’ç›®ã§ãƒ•ã‚£ãƒ«ã‚¿ã—ã¤ã¤(èª¤æ¤œçŸ¥ã ã¨ç¢ºä¿¡ãŒæŒã¦ã‚‹ã‹ã¯ã‚ã‹ã‚‰ãªã„)ã€&lt;br/&gt;
CloudFormation ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ›¸ãæ›ãˆã¦ã€Update Stackã—ãªã„ã¨ã„ã‘ãªã„ã€‚&lt;br/&gt;
(ä¸€å¿œã€Update Stack å‰ã« Change Set ã§å·®åˆ†ã‚’è¦‹ã¦ã€execute ã—ã¦å¤±æ•—ã™ã‚‹ã“ã¨ã‚’ç¢ºèªã—ãŸã»ã†ãŒå®‰å¿ƒæ„Ÿã¯ã‚ã‚‹ã€‚)&lt;/p&gt;
&lt;h2 id="_6"&gt;ã¾ã¨ã‚&lt;/h2&gt;
&lt;p&gt;æ‰‹ä½œæ¥­ã®å¤‰æ›´ã‚’ã§ããªã„ã‚ˆã†ã«ã—ã¦ãŠãä»¥å¤–ã«ãªã„ã€‚&lt;br/&gt;
ã‚ã‚‹ã„ã¯ã€æœ¬æ ¼çš„ã«CloudFormationã‚’åˆ©ç”¨ã—å§‹ã‚ã‚‹ã¾ã§ã®é–“ã« Terraform ã«ç§»è¡Œã™ã‚‹ã€‚&lt;/p&gt;
&lt;p&gt;(ãªã‚“ã§Change Setã‚’Runnning Stateã¨ã®æ¯”è¼ƒã«ã—ãªã‹ã£ãŸã‚“ã ã‚ã†...)&lt;/p&gt;</content><category term="blog"></category><category term="aws"></category><category term="cloudformation"></category></entry><entry><title>Debianã§LuaJITTeXã‚’ä½¿ã„ãŸã„</title><link href="https://www.hitsumabushi.org/blog/2018/10/31/1901.html" rel="alternate"></link><published>2018-10-31T19:01:00+09:00</published><updated>2018-10-31T19:01:00+09:00</updated><author><name>hitsumabushi</name></author><id>tag:www.hitsumabushi.org,2018-10-31:/blog/2018/10/31/1901.html</id><summary type="html">
&lt;p&gt;ãã‚ãã‚LuaTexä½¿ã£ã¦ã¿ãŸã„ãªã¨æ€ã£ãŸã¨ã“ã‚ã€LuaJITTeXã®æ–¹ãŒæ—©ã„å ´åˆãŒã‚ã‚‹ã¨ã„ã†ã“ã¨ã§ã€è©¦ã—ã¦ã¿ã‚ˆã†ã¨æ€ã£ãŸã€‚&lt;/p&gt;
&lt;h2 id="_1"&gt;å‚è€ƒ&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://www.fugenji.org/~thomas/texlive-guide/luajitlatex.html"&gt;luajittex ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;ãã‚‚ãã‚‚ã“ã®ã‚µã‚¤ãƒˆã®æƒ…å ±ãŒæœ‰ç”¨ &lt;a href="http://www.fugenji.org/~thomas/texlive-guide/index.html"&gt;TeX Live ã‚’ä½¿ãŠã†â”€â”€ä¸»ã« Linux ãƒ¦ãƒ¼ã‚¶ã®ãŸã‚ã«â”€â”€&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="_2"&gt;æœªè§£æ±ºã®å•é¡Œ&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;/var/lib/texmf/fmtutil.cnf-TEXLIVEDIST&lt;/code&gt; ãŒè‡ªå‹•ç”Ÿæˆã•ã‚Œã¦ã„ã‚‹ã€ã¨ã‚³ãƒ¡ãƒ³ãƒˆã•ã‚Œã¦ã„ã‚‹ãŒã€å…ƒãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‹ã‚‰ãªã„&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;### This file was automatically generated by update-fmtutil.
#
# Any local change will be overwritten. Please see the documentation
# of updmap on â€¦&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</summary><content type="html">
&lt;p&gt;ãã‚ãã‚LuaTexä½¿ã£ã¦ã¿ãŸã„ãªã¨æ€ã£ãŸã¨ã“ã‚ã€LuaJITTeXã®æ–¹ãŒæ—©ã„å ´åˆãŒã‚ã‚‹ã¨ã„ã†ã“ã¨ã§ã€è©¦ã—ã¦ã¿ã‚ˆã†ã¨æ€ã£ãŸã€‚&lt;/p&gt;
&lt;h2 id="_1"&gt;å‚è€ƒ&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://www.fugenji.org/~thomas/texlive-guide/luajitlatex.html"&gt;luajittex ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;ãã‚‚ãã‚‚ã“ã®ã‚µã‚¤ãƒˆã®æƒ…å ±ãŒæœ‰ç”¨ &lt;a href="http://www.fugenji.org/~thomas/texlive-guide/index.html"&gt;TeX Live ã‚’ä½¿ãŠã†â”€â”€ä¸»ã« Linux ãƒ¦ãƒ¼ã‚¶ã®ãŸã‚ã«â”€â”€&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="_2"&gt;æœªè§£æ±ºã®å•é¡Œ&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;/var/lib/texmf/fmtutil.cnf-TEXLIVEDIST&lt;/code&gt; ãŒè‡ªå‹•ç”Ÿæˆã•ã‚Œã¦ã„ã‚‹ã€ã¨ã‚³ãƒ¡ãƒ³ãƒˆã•ã‚Œã¦ã„ã‚‹ãŒã€å…ƒãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‹ã‚‰ãªã„&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;### This file was automatically generated by update-fmtutil.
#
# Any local change will be overwritten. Please see the documentation
# of updmap on how to override things from here.
#
###
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id="_3"&gt;æº–å‚™&lt;/h2&gt;
&lt;p&gt;ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;sudo&lt;span class="w"&gt; &lt;/span&gt;apt&lt;span class="w"&gt; &lt;/span&gt;install&lt;span class="w"&gt; &lt;/span&gt;texlive-lang-japanese&lt;span class="w"&gt; &lt;/span&gt;texlive-latex-extra&lt;span class="w"&gt; &lt;/span&gt;texlive-luatex
&lt;span class="c1"&gt;# å‚è€ƒæ–‡çŒ®ã¨ã‹æ›¸ãã¨ã&lt;/span&gt;
sudo&lt;span class="w"&gt; &lt;/span&gt;apt&lt;span class="w"&gt; &lt;/span&gt;install&lt;span class="w"&gt; &lt;/span&gt;texlive-bibtex-extra&lt;span class="w"&gt; &lt;/span&gt;biber
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;/var/lib/texmf/fmtutil.cnf-TEXLIVEDIST&lt;/code&gt; ã‚’ç·¨é›†ã—ãŸã„ã€‚(æœªè§£æ±ºã®é …ç›®ã«æ›¸ã„ãŸé€šã‚Šã€å…ƒãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‹ã‚‰ãªã„ã®ã§ç›´æ¥ç·¨é›†ã—ã¦ã„ã‚‹)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="gu"&gt;@@ -6,7 +6,7 @@&lt;/span&gt;
&lt;span class="w"&gt; &lt;/span&gt;###
&lt;span class="w"&gt; &lt;/span&gt;dviluatex luatex language.def,language.dat.lua dviluatex.ini
&lt;span class="w"&gt; &lt;/span&gt;etex pdftex language.def -translate-file=cp227.tcx *etex.ini
&lt;span class="gd"&gt;-#! luajittex luajittex language.def,language.dat.lua luatex.ini&lt;/span&gt;
&lt;span class="gi"&gt;+luajittex luajittex language.def,language.dat.lua luatex.ini&lt;/span&gt;
&lt;span class="w"&gt; &lt;/span&gt;luatex luatex language.def,language.dat.lua luatex.ini
&lt;span class="w"&gt; &lt;/span&gt;mf mf-nowin - -translate-file=cp227.tcx mf.ini
&lt;span class="w"&gt; &lt;/span&gt;pdfetex pdftex language.def -translate-file=cp227.tcx *pdfetex.ini
&lt;span class="gu"&gt;@@ -14,7 +14,7 @@&lt;/span&gt;
&lt;span class="w"&gt; &lt;/span&gt;tex tex - tex.ini
&lt;span class="w"&gt; &lt;/span&gt;dvilualatex luatex language.dat,language.dat.lua dvilualatex.ini
&lt;span class="w"&gt; &lt;/span&gt;latex pdftex language.dat -translate-file=cp227.tcx *latex.ini
&lt;span class="gd"&gt;-#! luajitlatex luajittex language.dat,language.dat.lua lualatex.ini&lt;/span&gt;
&lt;span class="gi"&gt;+luajitlatex luajittex language.dat,language.dat.lua lualatex.ini&lt;/span&gt;
&lt;span class="w"&gt; &lt;/span&gt;lualatex luatex language.dat,language.dat.lua lualatex.ini
&lt;span class="w"&gt; &lt;/span&gt;mptopdf pdftex - -translate-file=cp227.tcx mptopdf.tex
&lt;span class="w"&gt; &lt;/span&gt;pdflatex pdftex language.dat -translate-file=cp227.tcx *pdflatex.ini
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id="_4"&gt;ä½¿ã„æ–¹&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;luajittex&lt;span class="w"&gt; &lt;/span&gt;--fmt&lt;span class="o"&gt;=&lt;/span&gt;luajitlatex.fmt&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;{&lt;/span&gt;tex&lt;span class="w"&gt; &lt;/span&gt;file&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å•é¡Œãªãã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã§ãã‚Œã°ã€pdfãŒç”Ÿæˆã•ã‚Œã‚‹ã¯ãšã€‚&lt;/p&gt;
&lt;h2 id="vscodetex"&gt;VSCodeã§TeXã™ã‚‹&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://marketplace.visualstudio.com/items?itemName=James-Yu.latex-workshop"&gt;LaTeX Workshop&lt;/a&gt; ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã€ä»¥ä¸‹ã®è¨­å®šã‚’ã™ã‚‹ã€‚&lt;br/&gt;
å‚è€ƒæ–‡çŒ®ãŒå¿…è¦ãªã¨ãã¯ã€ &lt;code&gt;luajittex_with_bib&lt;/code&gt; ã®ãƒ¬ã‚·ãƒ”ã§ãƒ“ãƒ«ãƒ‰ã™ã‚‹ã‚ˆã†ã«æ›¸ã„ã¦ã„ã‚‹ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;"latex-workshop.chktex.enabled"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;"latex-workshop.latex.recipes"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="nt"&gt;"name"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;"luajittex"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="nt"&gt;"tools"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;"luajitlatex"&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="nt"&gt;"name"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;"luajittex_with_bib"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="nt"&gt;"tools"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="s2"&gt;"luajitlatex"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="s2"&gt;"biber"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="s2"&gt;"luajitlatex"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="s2"&gt;"luajitlatex"&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;"latex-workshop.latex.tools"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="nt"&gt;"name"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;"luajitlatex"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="nt"&gt;"command"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;"luajittex"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="nt"&gt;"args"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="s2"&gt;"--cmdx"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="s2"&gt;"--synctex=1"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="s2"&gt;"--fmt=luajitlatex.fmt"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="s2"&gt;"%DOCFILE%"&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="nt"&gt;"name"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;"biber"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="nt"&gt;"command"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;"biber"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="nt"&gt;"args"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="s2"&gt;"%DOCFILE%"&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;"latex-workshop.intellisense.surroundCommand.enabled"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;"latex-workshop.synctex.afterBuild.enabled"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id="tex"&gt;ãã®ä»–å®Ÿéš›ã®TeXã‚’æ›¸ãæ™‚ã«å‚è€ƒã«ãªã‚Šãã†ãªã‚‚ã®ã®ãƒ¡ãƒ¢&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;å‚è€ƒæ–‡çŒ®ã¾ã‚ã‚Š&lt;ul&gt;
&lt;li&gt;&lt;a href="https://ja.wikipedia.org/wiki/BibTeX#.E6.9B.B8.E8.AA.8C.E6.83.85.E5.A0.B1.E3.83.95.E3.82.A1.E3.82.A4.E3.83.AB"&gt;BibTeXã®æ›¸èªŒæƒ…å ±ã®æ›¸ãæ–¹çŸ¥ã‚ŠãŸã„ã¨ã: Wikipedia&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;å‚è€ƒæ–‡çŒ®ã‚’æ¢ã—ãŸã„æ™‚: Google Scholar&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;</content><category term="blog"></category><category term="tex"></category><category term="debian"></category></entry><entry><title>Debian ã§ãƒ­ã‚°ã‚¤ãƒ³ã‚·ã‚§ãƒ«ã‚’zshã«ã—ã¦ã„ã‚‹äººãŒ snappy ã‚’ä½¿ã†å ´åˆã®æ³¨æ„</title><link href="https://www.hitsumabushi.org/blog/2018/04/11/1058.html" rel="alternate"></link><published>2018-04-11T10:58:00+09:00</published><updated>2018-04-11T10:58:00+09:00</updated><author><name>hitsumabushi</name></author><id>tag:www.hitsumabushi.org,2018-04-11:/blog/2018/04/11/1058.html</id><summary type="html">
&lt;h2 id="snappy"&gt;Snappy ã«ã¤ã„ã¦&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.ubuntu.com/desktop/snappy"&gt;Snappy&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://snapcraft.io/"&gt;snapcraft&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Canonical ãŒä¸»å°ã—ã¦ã„ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚·ã‚¹ãƒ†ãƒ ã§ã€Universal Linux Package ã¨éŠ˜æ‰“ã¤ã‚ˆã†ã«ã€ãƒãƒ¼ã‚¿ãƒ–ãƒ«ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ³ã‚°ãŒã§ããã†ãªæ„Ÿã˜ã€‚&lt;br/&gt;
ãƒãƒ¼ã‚¿ãƒ“ãƒªãƒ†ã‚£ã‚’ä¸Šã’ã‚‹ãŸã‚ã«ã€dockerã¿ãŸã„ãªæ„Ÿã˜ã§ã€ä¾å­˜ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚‚å…¨éƒ¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«å«ã‚ã¦ã—ã¾ã†ã‚¹ã‚¿ã‚¤ãƒ«ãªã®ã§ã€å¤šå°‘debãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚ˆã‚Šã¯å¤§ãããªã‚‹ã€‚&lt;br/&gt;
ãã®åˆ†ã€sidã‚’ä½¿ã£ã¦ã„ã‚‹ã¨ã‚ˆãèµ·ãã‚‹ã€å…±é€šãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ä¾å­˜ãƒ â€¦&lt;/p&gt;</summary><content type="html">
&lt;h2 id="snappy"&gt;Snappy ã«ã¤ã„ã¦&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.ubuntu.com/desktop/snappy"&gt;Snappy&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://snapcraft.io/"&gt;snapcraft&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Canonical ãŒä¸»å°ã—ã¦ã„ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚·ã‚¹ãƒ†ãƒ ã§ã€Universal Linux Package ã¨éŠ˜æ‰“ã¤ã‚ˆã†ã«ã€ãƒãƒ¼ã‚¿ãƒ–ãƒ«ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ³ã‚°ãŒã§ããã†ãªæ„Ÿã˜ã€‚&lt;br/&gt;
ãƒãƒ¼ã‚¿ãƒ“ãƒªãƒ†ã‚£ã‚’ä¸Šã’ã‚‹ãŸã‚ã«ã€dockerã¿ãŸã„ãªæ„Ÿã˜ã§ã€ä¾å­˜ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚‚å…¨éƒ¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«å«ã‚ã¦ã—ã¾ã†ã‚¹ã‚¿ã‚¤ãƒ«ãªã®ã§ã€å¤šå°‘debãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚ˆã‚Šã¯å¤§ãããªã‚‹ã€‚&lt;br/&gt;
ãã®åˆ†ã€sidã‚’ä½¿ã£ã¦ã„ã‚‹ã¨ã‚ˆãèµ·ãã‚‹ã€å…±é€šãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ä¾å­˜ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ä¸æ•´åˆãŒãŠãã‚‹ã€ã¨ã„ã†å•é¡Œã¯èµ·ããªã„ã€‚&lt;/p&gt;
&lt;p&gt;snapcraftã®ãƒšãƒ¼ã‚¸ã§ã¯ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ³ã‚°ã®æ–¹æ³•ã‚‚ç´¹ä»‹ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€é…å¸ƒã—ãŸã„äººè‡ªèº«ãŒsnapãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½œã‚Šã‚„ã™ã„ã¯ãšã€‚&lt;br/&gt;
å°‘ãªãã¨ã‚‚ã€ãƒ‡ã‚£ã‚¹ãƒˆãƒ¼ã‚·ãƒ§ãƒ³ã”ã¨ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’å„ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ä½œæˆè€…ãŒã‚„ã‚‹ã‚ˆã‚Šã¯ã€é¥ã‹ã«ã‚„ã‚Šã‚„ã™ã„ã€‚&lt;br/&gt;
è‡ªå‹•ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã¨ã‹ã‚‚ã‚ã‚‹ã®ã§ã€ã‚µãƒ¼ãƒ“ã‚¹æä¾›è€…ãŒåˆ©ç”¨è€…ã«å¸¸ã«æœ€æ–°ç‰ˆã‚’ä½¿ã£ã¦ã‚‚ã‚‰ã„ãŸã„å ´åˆãªã©ã«ãƒ¡ãƒªãƒƒãƒˆã‚‚ã‚ã‚‹ã€‚&lt;br/&gt;
å®Ÿéš›ã€ Ubuntuä»¥å¤–ã«ã‚‚ã€Debian, Arch Linux, Gentoo, Fedora, open SUSE ãªã©ã§ã‚‚åˆ©ç”¨ã§ãã‚‹ã€‚&lt;/p&gt;
&lt;p&gt;Snappy ã¯ã€snapd ã¨ã„ã†APIãƒ‡ãƒ¼ãƒ¢ãƒ³ãŒå‹•ãã“ã¨ã«ãªã£ã¦ã„ã‚‹ã€‚&lt;/p&gt;
&lt;h3 id="snappy_1"&gt;snappy ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$&lt;span class="w"&gt; &lt;/span&gt;sudo&lt;span class="w"&gt; &lt;/span&gt;apt&lt;span class="w"&gt; &lt;/span&gt;install&lt;span class="w"&gt; &lt;/span&gt;snapd
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id="snap"&gt;snap ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$&lt;span class="w"&gt; &lt;/span&gt;sudo&lt;span class="w"&gt; &lt;/span&gt;snap&lt;span class="w"&gt; &lt;/span&gt;install&lt;span class="w"&gt; &lt;/span&gt;hello-world
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id="_1"&gt;å›°ã£ãŸã“ã¨&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Snappy ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¸ã®ãƒ‘ã‚¹ãŒé€šã‚‰ãªã„&lt;/li&gt;
&lt;li&gt;Snappy ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒã€menuã«ç™»éŒ²ã•ã‚Œãªã„&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="_2"&gt;èª¿ã¹ãŸã“ã¨&lt;/h2&gt;
&lt;h3 id="_3"&gt;ãƒãƒ¼ã‚¸ãƒ§ãƒ³&lt;/h3&gt;
&lt;p&gt;Kernel ã¯pinningã—ã¦ã„ã‚‹ã®ã§ã€å°‘ã—å¤ã„ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$&lt;span class="w"&gt; &lt;/span&gt;snap&lt;span class="w"&gt; &lt;/span&gt;version
snap&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt;.32.3
snapd&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt;.32.3
series&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="m"&gt;16&lt;/span&gt;
debian
kernel&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="m"&gt;4&lt;/span&gt;.9.0-3-amd64
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id="snappy_2"&gt;snappy ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸå ´åˆã®ãƒ‘ã‚¹&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å®Ÿæ…‹ã¯ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã”ã¨ã«ã€ &lt;code&gt;/snap/_app_name_/_version_/&lt;/code&gt; ä»¥ä¸‹ã«ç½®ã‹ã‚Œã‚‹ã€‚ç¾åœ¨åˆ©ç”¨ã—ã¦ã„ã‚‹ã‚‚ã®ã¸ã®ãƒªãƒ³ã‚¯ã¯ &lt;code&gt;/snap/_app_name_/current/&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;ã‚³ãƒãƒ³ãƒ‰ã¯ã€ &lt;code&gt;/snap/bin/&lt;/code&gt; ä»¥ä¸‹ã«ã‚³ãƒ”ãƒ¼ã•ã‚Œã‚‹ã€‚&lt;/li&gt;
&lt;li&gt;ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¨ãƒ³ãƒˆãƒªã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯ &lt;code&gt;/var/lib/snapd/desktop/applications/*.desktop&lt;/code&gt; ã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ãŒä½œæˆã•ã‚Œã‚‹&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="_4"&gt;ãƒ‘ã‚¹ã®è¨­å®šæ–¹æ³•ã«ã¤ã„ã¦&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;/etc/profile.d/apps-bin-path.sh&lt;/code&gt; ã«ãƒ‘ã‚¹ã‚’è¨­å®šã™ã‚‹ãŸã‚ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒç½®ã‹ã‚Œã¦ã„ã‚‹ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$&lt;span class="w"&gt; &lt;/span&gt;cat&lt;span class="w"&gt; &lt;/span&gt;/etc/profile.d/apps-bin-path.sh
&lt;span class="c1"&gt;#!/bin/sh --this-shebang-is-just-here-to-inform-shellcheck--&lt;/span&gt;

&lt;span class="c1"&gt;# Expand $PATH to include the directory where snappy applications go.&lt;/span&gt;
&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;PATH&lt;/span&gt;&lt;span class="p"&gt;#*/snap/bin&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;PATH&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;then&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nb"&gt;export&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;PATH&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$PATH&lt;/span&gt;:/snap/bin
&lt;span class="k"&gt;fi&lt;/span&gt;

&lt;span class="c1"&gt;# desktop files (used by desktop environments within both X11 and Wayland) are&lt;/span&gt;
&lt;span class="c1"&gt;# looked for in XDG_DATA_DIRS; make sure it includes the relevant directory for&lt;/span&gt;
&lt;span class="c1"&gt;# snappy applications' desktop files.&lt;/span&gt;
&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;XDG_DATA_DIRS&lt;/span&gt;&lt;span class="p"&gt;#*/snapd/desktop&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;XDG_DATA_DIRS&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;then&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nb"&gt;export&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;XDG_DATA_DIRS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;XDG_DATA_DIRS&lt;/span&gt;&lt;span class="k"&gt;:-&lt;/span&gt;&lt;span class="p"&gt;/usr/local/share:/usr/share&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;:/var/lib/snapd/desktop"&lt;/span&gt;
&lt;span class="k"&gt;fi&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;zsh ã§ã¯ &lt;code&gt;/etc/profile&lt;/code&gt; ãªã©ã‚’èª­ã¾ãªã„ã®ã§ã€ãƒ‘ã‚¹ãŒè¨­å®šã§ãã¦ã„ãªã„ã€‚&lt;br/&gt;
&lt;code&gt;/etc/zsh/zprofile&lt;/code&gt; ã«ã€ä¸Šè¨˜ã®å†…å®¹ã‚’æ›¸ã„ã¦ç½®ã‘ã°è‰¯ã„ã€‚&lt;br/&gt;
ã‚ã‚‹ã„ã¯ã€ &lt;code&gt;/etc/zsh/zprofile&lt;/code&gt; ã§ä»¥ä¸‹ã®ã‚ˆã†ã«ã™ã‚‹ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;i&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;/etc/profile.d/*.sh&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;do&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-r&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;$i&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;source&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;$i&lt;/span&gt;
&lt;span class="k"&gt;done&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content><category term="blog"></category><category term="debian"></category><category term="snappy"></category><category term="zsh"></category></entry><entry><title>PyPIã¸ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹</title><link href="https://www.hitsumabushi.org/blog/2018/04/05/1420.html" rel="alternate"></link><published>2018-04-05T14:20:00+09:00</published><updated>2018-04-05T14:20:00+09:00</updated><author><name>hitsumabushi</name></author><id>tag:www.hitsumabushi.org,2018-04-05:/blog/2018/04/05/1420.html</id><summary type="html">
&lt;h1 id="_1"&gt;è³‡æ–™&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ§‹æˆã«ã¤ã„ã¦ã¯ &lt;a href="https://github.com/pypa/sampleproject"&gt;github.com/pypa/sampleproject&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;https://pypi.python.org/pypi/twine&lt;/li&gt;
&lt;li&gt;https://packaging.python.org/tutorials/distributing-packages/&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="_2"&gt;æ‰‹é †&lt;/h1&gt;
&lt;h2 id="pypi"&gt;PyPIã¸ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ã™ã‚‹&lt;/h2&gt;
&lt;p&gt;PyPI ã«ã¯æ™®æ®µä½¿ã‚ã‚Œã¦ã„ã‚‹æœ¬ç•ªç’°å¢ƒã¨ã¯åˆ¥ã«ã€ãƒ†ã‚¹ãƒˆç’°å¢ƒãŒã‚ã‚‹ã€‚&lt;br/&gt;
ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒãã‚Œãã‚Œç‹¬ç«‹ã—ã¦ã„ã‚‹ã®ã§ã€ä¸¡æ–¹ã§ä½œæˆã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://pypi.org/"&gt;PyPI&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://test.pypi.org/"&gt;PyPI Test&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="pypirc"&gt;&lt;code&gt;.pypirc&lt;/code&gt; ã®ä½œæˆ&lt;/h2&gt;
&lt;p&gt;ä»¥ä¸‹ã®ã‚ˆã†ã« &lt;code&gt;~/.pypirc&lt;/code&gt; ã‚’ä½œæˆã—ã¦ã€test ç’°å¢ƒã‚’åˆ©ç”¨ã§ãã‚‹ã‚ˆã†ã«ã—ã¦ãŠãã€‚&lt;br/&gt;
å¹³åˆ†ã§ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’æ›¸ãã“ã¨ã«ãªã‚‹ â€¦&lt;/p&gt;</summary><content type="html">
&lt;h1 id="_1"&gt;è³‡æ–™&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ§‹æˆã«ã¤ã„ã¦ã¯ &lt;a href="https://github.com/pypa/sampleproject"&gt;github.com/pypa/sampleproject&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;https://pypi.python.org/pypi/twine&lt;/li&gt;
&lt;li&gt;https://packaging.python.org/tutorials/distributing-packages/&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="_2"&gt;æ‰‹é †&lt;/h1&gt;
&lt;h2 id="pypi"&gt;PyPIã¸ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ã™ã‚‹&lt;/h2&gt;
&lt;p&gt;PyPI ã«ã¯æ™®æ®µä½¿ã‚ã‚Œã¦ã„ã‚‹æœ¬ç•ªç’°å¢ƒã¨ã¯åˆ¥ã«ã€ãƒ†ã‚¹ãƒˆç’°å¢ƒãŒã‚ã‚‹ã€‚&lt;br/&gt;
ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒãã‚Œãã‚Œç‹¬ç«‹ã—ã¦ã„ã‚‹ã®ã§ã€ä¸¡æ–¹ã§ä½œæˆã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://pypi.org/"&gt;PyPI&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://test.pypi.org/"&gt;PyPI Test&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="pypirc"&gt;&lt;code&gt;.pypirc&lt;/code&gt; ã®ä½œæˆ&lt;/h2&gt;
&lt;p&gt;ä»¥ä¸‹ã®ã‚ˆã†ã« &lt;code&gt;~/.pypirc&lt;/code&gt; ã‚’ä½œæˆã—ã¦ã€test ç’°å¢ƒã‚’åˆ©ç”¨ã§ãã‚‹ã‚ˆã†ã«ã—ã¦ãŠãã€‚&lt;br/&gt;
å¹³åˆ†ã§ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’æ›¸ãã“ã¨ã«ãªã‚‹ã®ã§ã€æœ€ä½é™ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³ã‚’å¤‰ãˆã¦ãŠãã“ã¨ã«ã™ã‚‹ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;cat&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;~/&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pypirc&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;distutils&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="k"&gt;index&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;servers&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;pypi&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;testpypi&lt;/span&gt;

&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;pypi&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="n"&gt;repository&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nl"&gt;https&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="n"&gt;upload&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pypi&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;legacy&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;
&lt;span class="n"&gt;username&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;_username_&lt;/span&gt;
&lt;span class="n"&gt;password&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;_password_&lt;/span&gt;

&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;testpypi&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="n"&gt;repository&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nl"&gt;https&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="n"&gt;test&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pypi&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;legacy&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;
&lt;span class="n"&gt;username&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;_username_&lt;/span&gt;
&lt;span class="n"&gt;password&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;_password_&lt;/span&gt;

&lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;chmod&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0600&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;~/&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pypirc&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id="_3"&gt;ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰&lt;/h2&gt;
&lt;h3 id="_4"&gt;ã‚³ãƒãƒ³ãƒ‰ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$&lt;span class="w"&gt; &lt;/span&gt;pip&lt;span class="w"&gt; &lt;/span&gt;install&lt;span class="w"&gt; &lt;/span&gt;twine
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id="_5"&gt;ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ³ã‚°å‰ã®ãƒã‚§ãƒƒã‚¯&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$&lt;span class="w"&gt; &lt;/span&gt;pip&lt;span class="w"&gt; &lt;/span&gt;install&lt;span class="w"&gt; &lt;/span&gt;check-manifest
$&lt;span class="w"&gt; &lt;/span&gt;check-manifest
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id="_6"&gt;ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ³ã‚°&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$&lt;span class="w"&gt; &lt;/span&gt;pip&lt;span class="w"&gt; &lt;/span&gt;install&lt;span class="w"&gt; &lt;/span&gt;wheel
$&lt;span class="w"&gt; &lt;/span&gt;python&lt;span class="w"&gt; &lt;/span&gt;setup.py&lt;span class="w"&gt; &lt;/span&gt;sdist&lt;span class="w"&gt; &lt;/span&gt;bdist_wheel
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id="test"&gt;Test ç’°å¢ƒã¸ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;$&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;twine&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;upload&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;testpypi&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dist&lt;/span&gt;&lt;span class="o"&gt;/*&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;pip ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã«ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ã™ã‚‹ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$&lt;span class="w"&gt; &lt;/span&gt;pip&lt;span class="w"&gt; &lt;/span&gt;install&lt;span class="w"&gt; &lt;/span&gt;--index-url&lt;span class="w"&gt; &lt;/span&gt;https://test.pypi.org/simple/&lt;span class="w"&gt; &lt;/span&gt;_package_
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id="_7"&gt;æœ¬ç•ªã¸ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;$&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;twine&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;upload&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dist&lt;/span&gt;&lt;span class="o"&gt;/*&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content><category term="blog"></category><category term="pypi"></category><category term="python"></category></entry><entry><title>Google Cloud Pub/Sub ã‚’Golangã‹ã‚‰ä½¿ãŠã†ã¨ã—ã¦ãƒãƒã£ãŸã“ã¨ã¾ã¨ã‚</title><link href="https://www.hitsumabushi.org/blog/2018/02/05/2009.html" rel="alternate"></link><published>2018-02-05T20:09:00+09:00</published><updated>2018-02-05T20:09:00+09:00</updated><author><name>hitsumabushi</name></author><id>tag:www.hitsumabushi.org,2018-02-05:/blog/2018/02/05/2009.html</id><summary type="html">
&lt;h1 id="_1"&gt;æ¦‚è¦&lt;/h1&gt;
&lt;p&gt;&lt;a href="https://cloud.google.com/pubsub/overview?hl=ja"&gt;Google Pub/Sub&lt;/a&gt; ã‚’ &lt;a href="https://github.com/GoogleCloudPlatform/google-cloud-go"&gt;Goã®SDK&lt;/a&gt; ã‹ã‚‰ä½¿ãŠã†ã¨ã—ã¦ã„ã¾ã—ãŸã€‚&lt;br/&gt;
ã‚„ã£ã¦ã„ã‚‹ã¨ã„ãã¤ã‹è©°ã¾ã£ãŸã®ã§ã€ãƒ¡ãƒ¢ã—ã¦ãŠãã¾ã™ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’åˆ©ç”¨ã™ã‚‹ãŸã‚ã«Credentials JSONã‚’æŒ‡å®šã™ã‚‹&lt;/li&gt;
&lt;li&gt;ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ã® &lt;code&gt;Pub/Sub ã‚µãƒ–ã‚¹ã‚¯ãƒ©ã‚¤ãƒãƒ¼æ¨©é™&lt;/code&gt; ã‚’ä¸ãˆã¦ã‚‚ Permission Denied ã«ãªã‚‹&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="credentials-json"&gt;ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’åˆ©ç”¨ã™ã‚‹ãŸã‚ã«Credentials JSONã‚’æŒ‡å®šã™ã‚‹&lt;/h2&gt;
&lt;p&gt;æ¨©é™ã®éƒ½åˆä¸Šã€ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®Credentials JSONã‚’åˆ©ç”¨ã—ã¦èªè¨¼ â€¦&lt;/p&gt;</summary><content type="html">
&lt;h1 id="_1"&gt;æ¦‚è¦&lt;/h1&gt;
&lt;p&gt;&lt;a href="https://cloud.google.com/pubsub/overview?hl=ja"&gt;Google Pub/Sub&lt;/a&gt; ã‚’ &lt;a href="https://github.com/GoogleCloudPlatform/google-cloud-go"&gt;Goã®SDK&lt;/a&gt; ã‹ã‚‰ä½¿ãŠã†ã¨ã—ã¦ã„ã¾ã—ãŸã€‚&lt;br/&gt;
ã‚„ã£ã¦ã„ã‚‹ã¨ã„ãã¤ã‹è©°ã¾ã£ãŸã®ã§ã€ãƒ¡ãƒ¢ã—ã¦ãŠãã¾ã™ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’åˆ©ç”¨ã™ã‚‹ãŸã‚ã«Credentials JSONã‚’æŒ‡å®šã™ã‚‹&lt;/li&gt;
&lt;li&gt;ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ã® &lt;code&gt;Pub/Sub ã‚µãƒ–ã‚¹ã‚¯ãƒ©ã‚¤ãƒãƒ¼æ¨©é™&lt;/code&gt; ã‚’ä¸ãˆã¦ã‚‚ Permission Denied ã«ãªã‚‹&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="credentials-json"&gt;ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’åˆ©ç”¨ã™ã‚‹ãŸã‚ã«Credentials JSONã‚’æŒ‡å®šã™ã‚‹&lt;/h2&gt;
&lt;p&gt;æ¨©é™ã®éƒ½åˆä¸Šã€ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®Credentials JSONã‚’åˆ©ç”¨ã—ã¦èªè¨¼ã—ãŸã„ã€ã¨ã„ã†è¦ä»¶ãŒã‚ã‚Šã¾ã—ãŸã€‚&lt;br/&gt;
ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’è¦‹ã¦ã„ã‚‹ã¨ã€ &lt;a href="https://cloud.google.com/docs/authentication/production?hl=ja"&gt;ADC(Application Default Credentials)&lt;/a&gt; ã‚’åˆ©ç”¨ã—ã¦èªè¨¼ã—ã¦ã„ã‚‹å ´åˆãŒå¤šã„ã§ã™ã€‚&lt;br/&gt;
ã“ã‚Œã‚’ä½¿ã†å ´åˆã€ &lt;code&gt;GOOGLE_APPLICATION_CREDENTIALS&lt;/code&gt; ã¨ã„ã†ç’°å¢ƒå¤‰æ•°ãŒè¨­å®šã•ã‚Œã¦ã„ã‚Œã°ã€ãã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã‚“ã§ãã‚Œã‚‹ã®ã§ã™ãŒã€ä»Šå›ã®è¦ä»¶ã§ã¯è¤‡æ•°ã® Credentials ã‚’åˆ©ç”¨ã—ãŸã‹ã£ãŸã®ã§ã€Go ãƒ—ãƒ­ã‚°ãƒ©ãƒ ä¸­ã§æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã—ãŸã€‚&lt;/p&gt;
&lt;p&gt;çµè«–ã¨ã—ã¦ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ãªå½¢ã§pubsub client ã‚’ä½œã‚‹ã¨ãã«èªè¨¼æƒ…å ±ã‚’æ¸¡ã™ã“ã¨ãŒã§ãã¾ã™ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nv"&gt;jsonKey&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;err&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;:=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;ioutil&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;ReadFile&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;credentialJSONPath&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nv"&gt;conf&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;err&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;:=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;google&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;JWTConfigFromJSON&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;jsonKey&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;pubsub&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="nv"&gt;ScopePubSub&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;pubsub&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="nv"&gt;ScopeCloudPlatform&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;err&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;!=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;nil&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nv"&gt;log&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;Fatal&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;err&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nv"&gt;ctx&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;:=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;context&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;Background&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nv"&gt;ts&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;:=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;conf&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;TokenSource&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;ctx&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nv"&gt;c&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;err&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;:=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;pubsub&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;NewClient&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;ctx&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;projectID&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;option&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;WithTokenSource&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;ts&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Publisherã®ã‚µãƒ³ãƒ—ãƒ«ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚&lt;/p&gt;
&lt;script src="https://gist.github.com/hitsumabushi/7cf1fa45813208f314b29da84a3ff2cc.js"&gt;&lt;/script&gt;
&lt;h2 id="pubsub-permission-denied"&gt;ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ã® &lt;code&gt;Pub/Sub ã‚µãƒ–ã‚¹ã‚¯ãƒ©ã‚¤ãƒãƒ¼&lt;/code&gt; æ¨©é™ã‚’ä¸ãˆã¦ã‚‚ Permission Denied ã«ãªã‚‹&lt;/h2&gt;
&lt;p&gt;çµè«–ã¨ã—ã¦ã¯ã€ &lt;code&gt;Pub/Sub ã‚µãƒ–ã‚¹ã‚¯ãƒ©ã‚¤ãƒãƒ¼&lt;/code&gt; æ¨©é™ã«åŠ ãˆã¦ã€ &lt;code&gt;Pub/Sub é–²è¦§è€…&lt;/code&gt; ã®æ¨©é™ãŒå¿…è¦ã§ã—ãŸã€‚&lt;br/&gt;
ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä¸Šã¯ã€ &lt;code&gt;Pub/Sub ã‚µãƒ–ã‚¹ã‚¯ãƒ©ã‚¤ãƒãƒ¼&lt;/code&gt; æ¨©é™ã ã‘ã§è‰¯ã•ãã†ã«è¦‹ãˆã¾ã™ãŒã€æ¨©é™ä¸è¶³ã ã£ãŸã‚ˆã†ã§ã—ãŸã€‚&lt;br/&gt;
Subscriberã®ã‚µãƒ³ãƒ—ãƒ«ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚&lt;/p&gt;
&lt;script src="https://gist.github.com/hitsumabushi/baaeefd241e27ab0414763bdc6a93f11.js"&gt;&lt;/script&gt;</content><category term="blog"></category><category term="GCP"></category><category term="golang"></category></entry><entry><title>ã•ãã‚‰ã®ã‚¯ãƒ©ã‚¦ãƒ‰ã§Nç™¾å°ã‚’ç®¡ç†ã™ã‚‹ãŸã‚ã«terraformã¨ansibleã‚’ä½¿ã£ã¦ã„ã‚‹è©±</title><link href="https://www.hitsumabushi.org/blog/2017/12/05/1748.html" rel="alternate"></link><published>2017-12-05T17:48:00+09:00</published><updated>2017-12-05T17:48:00+09:00</updated><author><name>hitsumabushi</name></author><id>tag:www.hitsumabushi.org,2017-12-05:/blog/2017/12/05/1748.html</id><summary type="html">
&lt;hr/&gt;
&lt;p&gt;ã“ã‚Œã¯ã€&lt;a href="https://qiita.com/advent-calendar/2017/sakura"&gt;ã•ãã‚‰ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆ Advent Calendar 2017&lt;/a&gt; ã¨ã—ã¦æ›¸ã„ãŸ&lt;a href="https://qiita.com/hitsumabushi/items/e89b763dd4fc41e15136"&gt;è¨˜äº‹&lt;/a&gt; ã§ã™ã€‚&lt;/p&gt;
&lt;hr/&gt;
&lt;p&gt;ã•ãã‚‰ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã§ã¯ã€ä»Šå¹´4æœˆã‹ã‚‰IoTãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã® sakura.io ã‚’ã‚µãƒ¼ãƒ“ã‚¹æä¾›ã—ã¦ã„ã¾ã™ã€‚&lt;br/&gt;
sakura.io ã¯ã€ã•ãã‚‰ã®ã‚¯ãƒ©ã‚¦ãƒ‰ä¸Šã§æœ¬ç•ªãƒ»æ¤œè¨¼ç’°å¢ƒã‚’æ§‹ç¯‰ã—ã¦ãŠã‚Šã€æ•°ç™¾å°ã®ã‚µãƒ¼ãƒãƒ¼ã‚’åˆ©ç”¨ã—ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;ç§ã¯ãƒªãƒªãƒ¼ã‚¹ç›´å‰ã«ãƒãƒ¼ãƒ ã«å‚åŠ ã—ã€é–‹ç™ºã®å‚ã‚‰é‹ç”¨æ”¹å–„æ´»å‹•ã‚’ã—ã¦ã„ã¾ã—ãŸã€‚&lt;br/&gt;
ãã®çµæœã¨ â€¦&lt;/p&gt;</summary><content type="html">
&lt;hr/&gt;
&lt;p&gt;ã“ã‚Œã¯ã€&lt;a href="https://qiita.com/advent-calendar/2017/sakura"&gt;ã•ãã‚‰ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆ Advent Calendar 2017&lt;/a&gt; ã¨ã—ã¦æ›¸ã„ãŸ&lt;a href="https://qiita.com/hitsumabushi/items/e89b763dd4fc41e15136"&gt;è¨˜äº‹&lt;/a&gt; ã§ã™ã€‚&lt;/p&gt;
&lt;hr/&gt;
&lt;p&gt;ã•ãã‚‰ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã§ã¯ã€ä»Šå¹´4æœˆã‹ã‚‰IoTãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã® sakura.io ã‚’ã‚µãƒ¼ãƒ“ã‚¹æä¾›ã—ã¦ã„ã¾ã™ã€‚&lt;br/&gt;
sakura.io ã¯ã€ã•ãã‚‰ã®ã‚¯ãƒ©ã‚¦ãƒ‰ä¸Šã§æœ¬ç•ªãƒ»æ¤œè¨¼ç’°å¢ƒã‚’æ§‹ç¯‰ã—ã¦ãŠã‚Šã€æ•°ç™¾å°ã®ã‚µãƒ¼ãƒãƒ¼ã‚’åˆ©ç”¨ã—ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;ç§ã¯ãƒªãƒªãƒ¼ã‚¹ç›´å‰ã«ãƒãƒ¼ãƒ ã«å‚åŠ ã—ã€é–‹ç™ºã®å‚ã‚‰é‹ç”¨æ”¹å–„æ´»å‹•ã‚’ã—ã¦ã„ã¾ã—ãŸã€‚&lt;br/&gt;
ãã®çµæœã¨ã—ã¦Terraform ã‚’å°å…¥ã—ã€Terraform (+ Terraform for ã•ãã‚‰ã®ã‚¯ãƒ©ã‚¦ãƒ‰) + Ansible ã§é‹ç”¨ã™ã‚‹ã“ã¨ã«ãªã‚Šã¾ã—ãŸã€‚&lt;br/&gt;
å°å…¥ã¾ã§ã®èª²é¡Œã¨ã€ã©ã®ã‚ˆã†ã«å°å…¥ãƒ»åˆ©ç”¨ã—ã¦ã„ã‚‹ã®ã‹ã€ã«ã¤ã„ã¦æ›¸ããŸã„ã¨æ€ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;h2 id="_1"&gt;é‹ç”¨ã®èª²é¡Œ&lt;/h2&gt;
&lt;h3 id="_2"&gt;æ¤œè¨¼ç’°å¢ƒã¨æœ¬ç•ªç’°å¢ƒã§æ§‹æˆã«å·®åˆ†ãŒã‚ã‚Šã€ãã‚Œã«æ°—ã¥ãã¥ã‚‰ã„&lt;/h3&gt;
&lt;p&gt;mesos+marathon ã‚’åˆ©ç”¨ã—ãŸã‚³ãƒ³ãƒ†ãƒŠå®Ÿè¡Œç’°å¢ƒã‚’ä½¿ã£ãŸãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã«ãªã£ã¦ã„ã¦ã€ãã‚Œä»¥å¤–ã«ã‚‚ã€redis, memcached, ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚­ãƒ¥ãƒ¼ãªã©ã„ã‚ã„ã‚ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒã‚ã‚Šã¾ã™ã€‚&lt;br/&gt;
ãã®ãŸã‚ã€å€‹åˆ¥ã®é–‹ç™ºè€…ãŒã‚¯ãƒªãƒ¼ãƒ³ãªç’°å¢ƒã‚’æ°—è»½ã«ç”¨æ„ã—ã¥ã‚‰ã„ã§ã™ã€‚&lt;/p&gt;
&lt;p&gt;ã‚¤ãƒ³ãƒ•ãƒ©ã®æ§‹æˆã‚’å¤‰æ›´ã—ãŸã„ã¨æ€ã£ãŸã¨ãã€å€‹åˆ¥ã®é–‹ç™ºè€…ãŒã‚¯ãƒªãƒ¼ãƒ³ãªç’°å¢ƒã‚’å€‹åˆ¥ã«ä½œã‚‹ã®ã¯æ‰‹é–“ãŒã‹ã‹ã£ã¦ã—ã¾ã†ãŸã‚ã€ç›´æ¥æ¤œè¨¼ç’°å¢ƒã§ãƒ†ã‚¹ãƒˆã—ãŒã¡ã§ã™ã€‚ãã®éš›ã«ã€è¡Œã‚ã‚ŒãŸå¤‰æ›´ãŒãã®ã¾ã¾æ®‹ã£ã¦ã—ã¾ã„ã€æœ¬ç•ªç’°å¢ƒã¨ã®å·®ãŒæ®‹ã£ã¦ã—ã¾ã£ã¦ã„ã‚‹ã‚±ãƒ¼ã‚¹ãŒã‚ã‚Šã¾ã—ãŸã€‚&lt;/p&gt;
&lt;h3 id="ansible-playbook"&gt;Ansible Playbook ã®å†…å®¹ã¨ç¾å®Ÿã«å·®åˆ†ãŒã‚ã‚‹&lt;/h3&gt;
&lt;p&gt;ã‚‚ã¨ã‚‚ã¨OSå†…ã®è¨­å®šã¯ansibleã§ç®¡ç†ã—ã¦ã„ãŸã®ã§ã™ãŒã€å¯¾è±¡ãƒ›ã‚¹ãƒˆã®å¢—åŠ ã€ansible playbookã®è‚¥å¤§åŒ–ã«ä¼´ã„ã€å®Ÿè¡Œæ™‚é–“ãŒå¢—ãˆã¦ã—ã¾ã„ã¾ã—ãŸã€‚&lt;br/&gt;
ãã‚Œã«ä¼´ã„ã€&lt;code&gt;--limit&lt;/code&gt;,  &lt;code&gt;--tags&lt;/code&gt; ã‚’ã¤ã‘ã¦éƒ¨åˆ†çš„ã«å®Ÿè¡Œã™ã‚‹ã‚ˆã†ã«ãªã‚Šã€playbook ã¨å·®åˆ†ãŒæ•£è¦‹ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚&lt;/p&gt;
&lt;h2 id="_3"&gt;æ–¹é‡&lt;/h2&gt;
&lt;p&gt;ansible ã¯å…¨éƒ¨å®Ÿè¡Œã—ã‚ã€ãªã©ã¨ãƒ«ãƒ¼ãƒ«ã‚’ä½œã‚‹ã“ã¨ã¯ç°¡å˜ãªã®ã§ã™ãŒã€ä¸Šè¨˜ã«æ›¸ã„ãŸã¨ãŠã‚Šã€å¿ƒç†çš„ãªãƒãƒ¼ãƒ‰ãƒ«ã«ã‚ˆã£ã¦ç™ºç”Ÿã—ã¦ã„ã‚‹å•é¡Œã ã¨æ€ã„ã¾ã—ãŸã€‚ãã“ã§ãƒ«ãƒ¼ãƒ«åŒ–ã™ã‚‹ã“ã¨ã¯ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã®æ•—åŒ—ã¨ã„ã†æ„Ÿã˜ãŒã—ãŸã®ã§ã€å·®åˆ†ãŒã‚ã‹ã‚‹ã‚ˆã†ã«æ§‹æˆç®¡ç†ã™ã‚‹ã“ã¨ã¨ã€å·®åˆ†ã‚’å®šæœŸçš„ã«ãƒã‚§ãƒƒã‚¯ã—ã¦é€šçŸ¥ã™ã‚‹ã“ã¨ã«é›†ä¸­ã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚&lt;/p&gt;
&lt;p&gt;æ§‹æˆç®¡ç†ã¨ã—ã¦ã€OSå†…ã®éƒ¨åˆ†ã¯ansibleã‚’åˆ©ç”¨ã—ã¦ã„ãŸãŸã‚ãã®ã¾ã¾åˆ©ç”¨ã—ã€ã‚¤ãƒ³ãƒ•ãƒ©ã®æ§‹æˆç®¡ç†ã¨ã—ã¦ã¯ã€ã¡ã‚‡ã†ã© &lt;a href="https://sacloud.github.io/terraform-provider-sakuracloud/"&gt;Terraform for ã•ãã‚‰ã®ã‚¯ãƒ©ã‚¦ãƒ‰&lt;/a&gt; ã‚‚ã‚ã£ãŸãŸã‚ã€terraformã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚&lt;/p&gt;
&lt;p&gt;å·®åˆ†ã®æ¤œçŸ¥ã¨ã—ã¦ã¯ã€terraform plan, ansible check mode ã‚’å®šæœŸçš„ã«å®Ÿè¡Œã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚&lt;/p&gt;
&lt;h2 id="terraform"&gt;terraform å°å…¥ã®ãŸã‚ã«&lt;/h2&gt;
&lt;h3 id="terraform_1"&gt;terraform ã®ãƒ•ã‚©ãƒ«ãƒ€æ§‹æˆ&lt;/h3&gt;
&lt;p&gt;&lt;a href="https://github.com/hashicorp/best-practices/tree/master/terraform"&gt;ä»–ã®ã‚¯ãƒ©ã‚¦ãƒ‰ã§ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹&lt;/a&gt; ã‚’å‚è€ƒã«ã€ãƒ•ã‚©ãƒ«ãƒ€æ§‹æˆã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚&lt;br/&gt;
terraform plan, apply ãªã©ã™ã‚‹å ´åˆã«ã¯ã€ &lt;code&gt;pod-xxx&lt;/code&gt; ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªé…ä¸‹ã§å®Ÿè¡Œã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;.
â”œâ”€â”€ module
â”‚Â Â  â””â”€â”€ sakuracloud
â”‚Â Â      â”œâ”€â”€ compute
â”‚Â Â      â”‚Â Â  â”œâ”€â”€ compute.tf          // compute ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã€‚å„roleã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¸å¤‰æ•°ã‚’æ¸¡ã™
â”‚Â Â      â”‚Â Â  â”œâ”€â”€ role-hoge           // role ã”ã¨ã«ä½œæˆ
â”‚Â Â      â”‚Â Â  â”‚Â Â  â””â”€â”€ role-hoge.tf    // util ã® base-wrapperã¸å¤‰æ•°ã‚’æ¸¡ã™ã€‚roleå›ºæœ‰ã®å¤‰æ•°å¤‰æ›ã¯ã“ã“ã§ã‚„ã‚‹
â”‚Â Â      â”‚Â Â  â””â”€â”€ util                // ä»–ã®roleã‹ã‚‰èª­ã¾ã‚Œã‚‹
â”‚Â Â      â”‚Â Â      â”œâ”€â”€ base-wrapper    // instance ã¨ service-dns ã‚’å‘¼ã¶ãŸã‚ã®ã‚„ã¤ã€‚ä»–ã®roleã‹ã‚‰ã¯ã“ã„ã¤ã‚’è¦‹ã‚‹
â”‚Â Â      â”‚Â Â      â”œâ”€â”€ instance        // å€‹åˆ¥ã®ã‚µãƒ¼ãƒãƒ¼ã®ã€ã‚µãƒ¼ãƒãƒ¼/ãƒ‡ã‚£ã‚¹ã‚¯/DNSãƒ¬ã‚³ãƒ¼ãƒ‰ã®ä½œæˆ
â”‚Â Â      â”‚Â Â      â””â”€â”€ service-dns     // roleã”ã¨ã«ã€DNSãƒ¬ã‚³ãƒ¼ãƒ‰ãŒã‚ã‚‹å ´åˆ(VIPã«ç´ã¥ããƒ¬ã‚³ãƒ¼ãƒ‰ãªã©)
â”‚Â Â      â”œâ”€â”€ dns                     // ã•ãã‚‰ã®ã‚¯ãƒ©ã‚¦ãƒ‰ã®ãƒ‰ãƒ¡ã‚¤ãƒ³/DNSãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ç®¡ç†ã™ã‚‹ãŸã‚ã«åˆ©ç”¨
â”‚Â Â      â”‚Â Â  â”œâ”€â”€ dns.tf
â”‚Â Â      â”‚Â Â  â””â”€â”€ example
â”‚Â Â      â”‚Â Â      â”œâ”€â”€ example.tf
â”‚Â Â      â”‚Â Â      â””â”€â”€ output.tf
â”‚Â Â      â”œâ”€â”€ gslb                    // ã•ãã‚‰ã®ã‚¯ãƒ©ã‚¦ãƒ‰ã®GSLBã‚’ç®¡ç†ã™ã‚‹ãŸã‚ã«åˆ©ç”¨
â”‚Â Â      â”‚Â Â  â”œâ”€â”€ api
â”‚Â Â      â”‚Â Â  â”‚Â Â  â””â”€â”€ api.tf
â”‚Â Â      â”‚Â Â  â””â”€â”€ gslb.tf
â”‚Â Â      â”œâ”€â”€ network                 // ã•ãã‚‰ã®ã‚¯ãƒ©ã‚¦ãƒ‰ã®ã‚¹ã‚¤ãƒƒãƒ/ãƒ«ãƒ¼ã‚¿ãƒ¼ã‚’ç®¡ç†ã™ã‚‹ãŸã‚ã«åˆ©ç”¨
â”‚Â Â      â”‚Â Â  â”œâ”€â”€ internal
â”‚Â Â      â”‚Â Â  â”‚Â Â  â”œâ”€â”€ internal.tf
â”‚Â Â      â”‚Â Â  â”‚Â Â  â””â”€â”€ output.tf
â”‚Â Â      â”‚Â Â  â”œâ”€â”€ network.tf
â”‚Â Â      â”‚Â Â  â””â”€â”€ output.tf
â”‚Â Â      â””â”€â”€ simple-monitor          // ã•ãã‚‰ã®ã‚¯ãƒ©ã‚¦ãƒ‰ã®ã‚·ãƒ³ãƒ—ãƒ«ç›£è¦–ã‚’ç®¡ç†ã™ã‚‹ãŸã‚ã«åˆ©ç”¨
â”‚Â Â          â””â”€â”€ simple_monitor.tf
â””â”€â”€ providers
    â””â”€â”€ sakuracloud
        â””â”€â”€ pod-xxx                 // ã‚·ã‚¹ãƒ†ãƒ å˜ä½ã”ã¨ã«ä½œã‚‹
            â”œâ”€â”€ pod-xxx.tf          // compute.tf, dns.tf, ... ãªã©ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã”ã¨ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã¸å¤‰æ•°ã‚’æ¸¡ã™
            â”œâ”€â”€ terraform.tfstate.d // tfstateã€‚env (ä»Šã§è¨€ã†workspace) ã§æœ¬ç•ªã¨æ¤œè¨¼ç’°å¢ƒã‚’ã‚ã‘ã¦ã‚‹ã€‚
            â”‚Â Â  â”œâ”€â”€ dev
            â”‚Â Â  â””â”€â”€ ...
            â””â”€â”€ terraform.tfvars    // å¤‰æ•°ã‚’ã²ãŸã™ã‚‰æ›¸ãã€‚å…·ä½“çš„ãªå€¤ã¯å…¨ã¦ã“ã“ã«æ›¸ã‹ã‚Œã¦ã„ã‚‹ã¯ãšã€‚
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å¤§ä½“ã¯ã•ãã‚‰ã®ã‚¯ãƒ©ã‚¦ãƒ‰ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã”ã¨ã«ã€moduleã‚’ä½œã£ã¦ã„ã‚‹ã®ã§ã™ãŒã€compute ã®ã¨ã“ã‚ã¯å¤§ããå¤‰æ›´ã—ã¦ã„ã¾ã™ã€‚&lt;br/&gt;
ã‚µãƒ¼ãƒãƒ¼ä½œæˆã¨åŒæ™‚ã«ã€ãƒ‡ã‚£ã‚¹ã‚¯ã®ä½œæˆã‚„ã€DNSãƒ¬ã‚³ãƒ¼ãƒ‰ã®ä½œæˆã‚’è¡Œã†ãŸã‚ã§ã™ã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹ãˆã°ã€role-hoge ã¨ã„ã†ãƒ­ãƒ¼ãƒ«ãŒ2å°ã‚ã‚‹ã¨ãã€tfvarä¸­ã§ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªå¤‰æ•°ã‚’ä½œã£ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nx"&gt;sakuracloud_dns_foo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nx"&gt;dev&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;zone&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;"dev.example.com"&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nx"&gt;staging&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;zone&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;"staging.example.com"&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="nx"&gt;sakuracloud_role_hoge&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nx"&gt;dev&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;ipaddresses&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s"&gt;"192.168.0.10"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;"192.168.0.11"&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nx"&gt;dev&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;server_tags&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s"&gt;"hoge"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;"develop"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;"__with_sacloud_inventory"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;"starred"&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nx"&gt;dev&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;disk_tags&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s"&gt;"hoge"&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nx"&gt;staging&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;ipaddresses&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s"&gt;"192.168.1.10"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;"192.168.1.11"&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nx"&gt;staging&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;server_tags&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s"&gt;"hoge"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;"staging"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;"__with_sacloud_inventory"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;"starred"&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nx"&gt;staging&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;disk_tags&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s"&gt;"hoge"&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã“ã‚Œã‚’ä½¿ã£ã¦ã€devç’°å¢ƒã§ã‚µãƒ¼ãƒãƒ¼ä½œæˆã—ãŸã¨ã&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ã‚µãƒ¼ãƒãƒ¼åã‚’FQDNã«ä¸€è‡´ã•ã›ã‚‹&lt;ul&gt;
&lt;li&gt;&lt;code&gt;hoge-01.dev.example.com&lt;/code&gt;, &lt;code&gt;hoge-02.dev.example.com&lt;/code&gt; &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;DNSãƒ¬ã‚³ãƒ¼ãƒ‰ã‚‚åˆã‚ã›ã¦ä½œæˆã™ã‚‹&lt;ul&gt;
&lt;li&gt;Aãƒ¬ã‚³ãƒ¼ãƒ‰ã¨ã—ã¦ &lt;code&gt;hoge-01.dev.example.com&lt;/code&gt; ã¯192.168.0.10, &lt;code&gt;hoge-02.dev.example.com&lt;/code&gt; ã¯192.168.0.11 ã«å¯¾å¿œã•ã›ã‚‹&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ã‚µãƒ¼ãƒãƒ¼ã‚¿ã‚°ã¨ã—ã¦ã€ansibleã®roleã‚’ã¤ã‘ã‚‹&lt;ul&gt;
&lt;li&gt;&lt;code&gt;hoge&lt;/code&gt;, &lt;code&gt;develop&lt;/code&gt;, &lt;code&gt;staging&lt;/code&gt; ãŒansibleå´ã§åˆ©ç”¨ã—ã¦ã„ã‚‹ãƒ­ãƒ¼ãƒ«åã§ã™&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ã‚µãƒ¼ãƒãƒ¼ã‚¿ã‚°ã¨ã—ã¦ã€ &lt;code&gt;__with_sacloud_inventory&lt;/code&gt; ã‚’ã¤ã‘ã‚‹&lt;ul&gt;
&lt;li&gt;ä¸€å¿œã€terraform ç®¡ç†å¤–ã®ãƒªã‚½ãƒ¼ã‚¹ã‚’è¨±ã™ãŸã‚ã«ã¤ã‘ã¦ã„ã¾ã™&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ã‚µãƒ¼ãƒãƒ¼ã‚¿ã‚°ã¨ã—ã¦ã€ &lt;code&gt;@group=a&lt;/code&gt; ãªã©ã®ã‚°ãƒ«ãƒ¼ãƒ—ã‚¿ã‚°ã‚’ã¤ã‘ã‚‹&lt;ul&gt;
&lt;li&gt;1ã¤ç›®ã®ã‚µãƒ¼ãƒãƒ¼ã¯aã€2ã¤ç›®ã¯bã€...4ã¤ç›®ã¯dã€5ã¤ç›®ã¯aãªã©ã¨ã—ã¦ã„ã¾ã™&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="terraformimport"&gt;æ—¢å­˜ãƒªã‚½ãƒ¼ã‚¹ã‚’terraformã«import&lt;/h3&gt;
&lt;p&gt;æ—¢å­˜ã®ãƒªã‚½ãƒ¼ã‚¹ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¾ã™ã€‚å½¢å¼ã¨ã—ã¦ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ãªå½¢å¼ã§ã™ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;terraform&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="s1"&gt;'module.hoge.module.base-instance.sakuracloud_server.base[0]'&lt;/span&gt; &lt;span class="n"&gt;_ãƒªã‚½ãƒ¼ã‚¹ID_&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æ³¨æ„ç‚¹ã¨ã—ã¦ã¯ã€tfãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›¸ã„ãŸã‚ã¨ã€terraform planã™ã‚Œã°ã€ä½•ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ãªã„ã¨ã„ã‘ãªã„ã‹ã‚ã‹ã‚‹ã®ã§ã™ãŒã€&lt;br/&gt;
ãã®è¡¨ç¤ºã§ã¯ã€&lt;code&gt;module.hoge.base-instance.sakuracloud_server.base[0]&lt;/code&gt; ã¨ã„ã†ã‚ˆã†ã«ã€é€”ä¸­ã«moduleãŒãªã„å½¢å¼ã§è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚ import ã™ã‚‹ã«ã¯éƒ½åº¦moduleã‚’æ›¸ãå¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;ã¾ãŸã€ã•ãã‚‰ã®ã‚¯ãƒ©ã‚¦ãƒ‰ã«ã¯ãƒªã‚½ãƒ¼ã‚¹IDãŒãªã„ã‘ã©ã€terraform ã§ç®¡ç†ã§ãã‚‹ã‚‚ã®ãŒã‚ã‚Šã¾ã™ã€‚ä¾‹ãˆã°DNSãƒ¬ã‚³ãƒ¼ãƒ‰ãŒãã†ã§ã™ã€‚&lt;br/&gt;
ã“ã®å ´åˆã€ãƒªã‚½ãƒ¼ã‚¹IDã«å½“ãŸã‚‹ã‚‚ã®ã‚’è‡ªåˆ†ã§ä½œæˆã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚&lt;br/&gt;
ã©ã®ã‚ˆã†ã«ç”Ÿæˆã™ã‚‹ã‹ã¯ã€ terraform for ã•ãã‚‰ã®ã‚¯ãƒ©ã‚¦ãƒ‰ã®ã‚½ãƒ¼ã‚¹ã‚’è¦‹ã‚Œã°ã‚ˆã„ã®ã§ã™ãŒã€å‚è€ƒã¾ã§ã«golangã§ç”Ÿæˆã™ã‚‹ä¾‹ã‚’è¼‰ã›ã¦ãŠãã¾ã™ã€‚&lt;br/&gt;
https://play.golang.org/p/OvQw6BdxVf&lt;/p&gt;
&lt;h3 id="ansible-dynamic-inventory"&gt;ansible ã® dynamic inventory ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆä½œæˆ&lt;/h3&gt;
&lt;script src="https://gist.github.com/hitsumabushi/73411a6bcb900a05c027ae0c8a39a9b3.js"&gt;&lt;/script&gt;
&lt;p&gt;ä¸Šè¨˜ã®ã‚ˆã†ãª&lt;code&gt;sacloud_inventory.py&lt;/code&gt;ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ansibleã®ãƒªãƒã‚¸ãƒˆãƒªã«å®Ÿè¡Œæ¨©é™ã‚’ã¤ã‘ã¦ç”¨æ„ã—ã¦ã„ã¾ã™ã€‚&lt;br/&gt;
ãã‚Œã«ã‚ˆã‚Šã€ &lt;code&gt;ansible-playbook -i sacloud_inventory.py ...&lt;/code&gt; ã¨ã™ã‚‹ã“ã¨ã§ã€ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒªãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›¸ãã“ã¨ãªãansibleã‚’å®Ÿè¡Œã§ãã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;ã“ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ã€ã•ãã‚‰ã®ã‚¯ãƒ©ã‚¦ãƒ‰ã®APIã‚’å©ãã¨ã“ã‚ã¯ã™ã¹ã¦ã€ &lt;a href="https://github.com/sacloud/usacloud"&gt;usacloud&lt;/a&gt; ã«ãŠã¾ã‹ã›ã—ã¦ã„ã¾ã™ã€‚&lt;br/&gt;
å…ˆç¨‹ã® terraform ã®ä¾‹ã§ã‚ã£ãŸã‚ˆã†ã«ã€ &lt;code&gt;__with_sacloud_inventory&lt;/code&gt; ãŒå…¥ã£ã¦ã„ãªã„ã‚‚ã®ã¯å…¨éƒ¨ç„¡è¦–ã—ã€ã‚¿ã‚°ã¯å…¨ã¦ã‚°ãƒ«ãƒ¼ãƒ—åã«ã™ã‚‹ã“ã¨ã«ã—ã¦ã„ã¾ã™ã€‚&lt;br/&gt;
(13-22è¡Œç›®ã¯ã€&lt;a href="https://github.com/ansible/awx"&gt;Ansible Towerã®OSSç‰ˆã§ã‚ã‚‹AWX&lt;/a&gt; ã‚’è©¦ã—ã¦ã„ã‚‹ãŸã‚ã«å…¥ã‚Œã¦ã„ã¾ã™ã€‚)&lt;/p&gt;
&lt;p&gt;ã‚‚ã—ã‹ã—ãŸã‚‰ã€ã•ãã‚‰ã®ã‚¯ãƒ©ã‚¦ãƒ‰ã®ç‰¹æ®Šã‚¿ã‚°ã§ã‚ã‚‹ &lt;code&gt;@group=a&lt;/code&gt; ãªã©ã¯é™¤ã„ãŸæ–¹ãŒä½¿ã„ã‚„ã™ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€ç›£è¦–å´ã‹ã‚‰ã‚‚è¦‹ã‚‹ãŸã‚ã«ç¾çŠ¶ã¯ã™ã¹ã¦å…¥ã‚Œã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;h2 id="ansible"&gt;ansible å´ã®æº–å‚™&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;ansible-playbook -i sacloud_inventory.py site.yml --check&lt;/code&gt; ã‚’ã—ãŸã„ã®ã§ã™ãŒã€ã—ã°ã—ã° check modeã§å®Ÿè¡Œã§ãã¦ã„ãªã„playbookã‚„ã€å¤‰æ›´ãŒãªã„ã®ã«changedã«ã—ã¦ã„ã‚‹playbookãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã‚’ç›´ã—ã¾ã—ã‚‡ã†ã€‚&lt;br/&gt;
check modeã§å®Ÿè¡Œã§ãã¦ã„ãªã„ã€å…¸å‹çš„ãªã‚‚ã®ã¨ã—ã¦ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªã‚‚ã®ãŒã‚ã‚Šã¾ã™ã€‚&lt;/p&gt;
&lt;h3 id="task"&gt;åˆ¥ã®taskã®å®Ÿè¡Œçµæœã‚’å‚ç…§ã—ã¦ã„ã‚‹&lt;/h3&gt;
&lt;p&gt;register ã‚’ä½¿ã£ã¦ã„ã‚‹ã‚¿ã‚¹ã‚¯Aã®çµæœã‚’å‚ç…§ã—ã¦ã„ã‚‹ã‚¿ã‚¹ã‚¯BãŒã‚ã‚‹å ´åˆã€check mode ä¸­ã§AãŒå®Ÿè¡Œã•ã‚Œãªã„ãŸã‚ã€ã‚¿ã‚¹ã‚¯Bã®checkå®Ÿè¡Œæ™‚ã«å¤‰æ•°ãŒå‚ç…§ã§ããªã„ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¾ã™ã€‚&lt;br/&gt;
ã“ã‚Œã‚’é˜²ãã«ã¯ã€register ã‚’ä½¿ã£ã¦ã„ã‚‹ã‚¿ã‚¹ã‚¯Aã« &lt;code&gt;check_mode: no&lt;/code&gt; ã‚’ã¤ã‘ã‚‹ã“ã¨ã§ã™ã€‚&lt;br/&gt;
check modeã§ã‚‚æœ¬å½“ã«å®Ÿè¡Œã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚‹ãŸã‚ã€ä¾‹ãˆã°ã€ãƒ•ã‚¡ã‚¤ãƒ«ã®å­˜åœ¨ã ã‘ã‚’ç¢ºèªã—ã¦ã„ã‚‹å ´åˆãªã©ã€å‰¯ä½œç”¨ãŒãªã„å ´åˆã®ã¿ã€ &lt;code&gt;check_mode: no&lt;/code&gt; ã‚’ã¤ã‘ã¾ã—ã‚‡ã†ã€‚&lt;/p&gt;
&lt;h3 id="check-modeshell"&gt;check modeã«å¯¾å¿œã—ã¦ã„ãªã„(ç‰¹ã«shellãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«)&lt;/h3&gt;
&lt;p&gt;å®Ÿè¡Œã™ã‚‹åˆ¤æ–­ã‚’è¡Œã†ã‚ˆã†ãªã‚¿ã‚¹ã‚¯ã‚’ä½œã£ã¦ã€ãã®çµæœæ¬¡ç¬¬ã§ã€ã‚¿ã‚¹ã‚¯ã‚’å®Ÿè¡Œã™ã‚‹ã‚ˆã†ã«æ›¸ãæ›ãˆã¾ã™ã€‚&lt;br/&gt;
æ–°ã—ãä½œæˆã—ãŸã‚¿ã‚¹ã‚¯ã§ã¯ã€ä¸Šè¿°ã®é€šã‚Šå‰¯ä½œç”¨ãŒãªã„ã‚ˆã†ã«ã—ã€ &lt;code&gt;check_mode: no&lt;/code&gt; ã‚’ã¤ã‘ã¾ã—ã‚‡ã†ã€‚&lt;/p&gt;
&lt;h3 id="dns"&gt;è£œè¶³: DNSã‚¾ãƒ¼ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã®æ›´æ–°&lt;/h3&gt;
&lt;p&gt;ä»Šå›ã€check modeã§å®Ÿè¡Œå¯èƒ½ã«ã™ã‚‹ãŸã‚ã«playbookã‚’ã¿ãªã—ã¦ã„ã‚‹ã¨ã€ansible ã§æ›´æ–°ã•ã‚Œã¦ã„ãªã„ã‚‚ã®ã¨ã—ã¦ã€templateæŒ‡å®šã•ã‚ŒãŸDNSã‚¾ãƒ¼ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚Šã¾ã—ãŸã€‚&lt;br/&gt;
ã‚¾ãƒ¼ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã€ã‚·ãƒªã‚¢ãƒ«ã‚’å¢—ã‚„ã—ã¦ã„ãå¿…è¦ãŒã‚ã‚‹ãŸã‚ã€é¢å€’ã ã£ãŸã®ã ã¨æ€ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;ç¢ºã‹ã«ã€è¨€ã‚ã‚Œã‚‹ã¨ã‚ã‚“ã©ãã•ã„ã‚ˆã†ãªæ°—ã‚‚ã—ã¾ã™ãŒã€ã‚„ã£ã¦ã¿ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«ã™ã‚Œã°è‰¯ã•ãã†ã§ã™ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ç¾åœ¨ã®zone fileã‚’è¦‹ã¦ã€ç¾åœ¨ã® serial ã‚’å–ã‚Šå‡ºã—ã€registerã§å¤‰æ•°ã«å…¥ã‚Œã‚‹&lt;/li&gt;
&lt;li&gt;template ãƒ•ã‚¡ã‚¤ãƒ«ã«ã€ 1.ã§å–ã£ãŸserialã‚’å…¥ã‚Œã¦ã€å·®åˆ†ãŒã‚ã‚‹ã‹ã©ã†ã‹ã‚’ç¢ºã‹ã‚ã‚‹&lt;/li&gt;
&lt;li&gt;ã‚‚ã—ã€2.ã§å·®åˆ†ãŒã‚ã£ãŸã‚‰ serialã‚’ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ãƒˆã—ãŸä¸Šã§ã€template ã‚’å®Ÿè¡Œã™ã‚‹&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å®Ÿéš›ã«æ›¸ã„ã¦ã¿ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚‹ã¨æ€ã„ã¾ã™ã€‚(NSDã‚’åˆ©ç”¨ã—ãŸå ´åˆã®ä¾‹)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;server&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;port&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;10053&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;zonesdir&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;"/etc/nsd/zones"&lt;/span&gt;

&lt;span class="o"&gt;{%&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;zone&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dns&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;zones&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;%}&lt;/span&gt;
&lt;span class="n"&gt;zone&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;"{{ zone }}"&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;zonefile&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;"{{ zone }}"&lt;/span&gt;

&lt;span class="o"&gt;{%&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;endfor&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;%}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;block&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;parse&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;serial&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;zone&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;shell&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;grep&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;";Serial"&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;nsd&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;zones&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="p"&gt;{{&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}}&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;awk&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;'{print $1}'&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;with_items&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;"{{ dns.zones }}"&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;register&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;old_serials&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;check_mode&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;no&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;changed_when&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;no&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;tags&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;nsd&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;check&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;whether&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;zone&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;files&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;updated&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;or&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;not&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;template&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;src&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;zones&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="p"&gt;{{&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}}&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;j2&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dest&lt;/span&gt;&lt;span class="o"&gt;=/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;nsd&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;zones&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="p"&gt;{{&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}}&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;owner&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;group&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;mode&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0644&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;vars&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="n"&gt;serial&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;"{{ old_serials.results[item.0].stdout }}"&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;with_indexed_items&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;"{{ dns.zones }}"&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;diff&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;no&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;register&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;zonefiles_changed&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;tags&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;nsd&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;update&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;zonefile&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;when&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;changed&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;template&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;src&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;zones&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="p"&gt;{{&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}}&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;j2&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dest&lt;/span&gt;&lt;span class="o"&gt;=/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;nsd&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;zones&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="p"&gt;{{&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}}&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;owner&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;group&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;mode&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0644&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;vars&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="n"&gt;serial&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;"{{ old_serials.results[item.0].stdout|int + 1 }}"&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;when&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;zonefiles_changed&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;results&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;changed&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;with_indexed_items&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;"{{ dns.zones }}"&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;notify&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;reload&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;nsd&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;tags&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;nsd&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id="_4"&gt;å®šæœŸçš„ãªå·®åˆ†ãƒã‚§ãƒƒã‚¯&lt;/h2&gt;
&lt;p&gt;ã“ã“ã¾ã§ãã‚Œã°ã€ã‚ã¨ã¯cronãªã‚ŠJenkinsã§ã€&lt;code&gt;terraform plan&lt;/code&gt; ã¨ &lt;code&gt;ansible-playbook -i sacloud_inventory.py site.yml --check&lt;/code&gt; ã‚’å®šæœŸçš„ã«èµ°ã‚‰ã›ã¦ã€å·®åˆ†ãŒã‚ã£ãŸã‚‰slackãªã‚Šã«é€šçŸ¥ã™ã‚Œã°ã‚ªãƒƒã‚±ãƒ¼ã§ã™ã€‚&lt;br/&gt;
Jenkinsã‹ã‚‰applyã™ã‚‹ã‚ˆã†ã«ã—ã¦ãŠã‘ã°ã€ã‚ˆã‚Šè‰¯ã„ã¨æ€ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;h2 id="_5"&gt;æ„Ÿæƒ³ã¨ä»Šå¾Œã«å‘ã‘ã¦&lt;/h2&gt;
&lt;p&gt;ã“ã“ã§ã¯ã‚¤ãƒ³ãƒ•ãƒ©ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’ã©ã®ã‚ˆã†ã«æ”¹å–„ã—ã¦ããŸã®ã‹ã‚’æ›¸ãã¾ã—ãŸã€‚&lt;br/&gt;
usacloud ã‚„ Terraform for ã•ãã‚‰ã®ã‚¯ãƒ©ã‚¦ãƒ‰ãŒã‚ã‚‹ãŠã‹ã’ã§ã€è¦æ¨¡ãŒå¤§ãããªã£ã¦ã‚‚æ¥½ã«ç®¡ç†ã§ãã¦ã„ã‚‹å®Ÿæ„ŸãŒã‚ã‚Šã¾ã™ã€‚&lt;br/&gt;
å®Ÿéš›ã€é›‘ã«è‡ªå‰ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æ›¸ã„ã¦ã„ãŸã‚‚ã®ã‚‚æ¨ã¦ã¦ã„ã£ã¦ã„ã‚‹ã¨ã“ã‚ã§ã™ã€‚&lt;/p&gt;
&lt;p&gt;ã“ã®è¨˜äº‹ã§æ›¸ã„ãŸã‚ˆã†ã«ã‚¤ãƒ³ãƒ•ãƒ©ã®æ•´åˆæ€§ã‚’ç¢ºã‹ã‚ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸã®ã§ã€ä»Šå¾Œã¨ã—ã¦ã¯ã€&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;(ansibleã®å®Ÿè¡Œã‚’ &lt;a href="https://github.com/ansible/awx"&gt;AWX&lt;/a&gt; ã§è¡Œã†(ã ã„ãŸã„ã§ããŸ) )&lt;/li&gt;
&lt;li&gt;ã‚¤ãƒ³ãƒ•ãƒ©/ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®CDã‚’è¡Œã†ãŸã‚ã®ç›£è¦–æ”¹å–„ã€‚ç‰¹ã« node/service discoveryæ”¹å–„&lt;/li&gt;
&lt;li&gt;ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®CD&lt;/li&gt;
&lt;li&gt;terraform, ansible ã®è‡ªå‹•é©ç”¨&lt;br/&gt;
ãªã©ã‚’ç›®æ¨™ã«æ”¹å–„æ´»å‹•ã‚’è¡Œã£ã¦ã„ãäºˆå®šã§ã™ã€‚&lt;/li&gt;
&lt;/ul&gt;</content><category term="blog"></category><category term="sakrua"></category><category term="ansible"></category><category term="terraform"></category></entry></feed>